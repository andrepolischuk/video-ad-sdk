!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(function(){return function(){var e={296:function(e,t,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,l=c||d||Function("return this")(),h=Object.prototype.toString,u=Math.max,p=Math.min,m=function(){return l.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function f(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||s.test(e)?a(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,s,a,c,d=0,l=!1,h=!1,E=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function w(t){var n=r,o=i;return r=i=void 0,d=t,s=e.apply(o,n)}function g(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-d>=o}function A(){var e=m();if(g(e))return y(e);a=setTimeout(A,function(e){var n=t-(e-c);return h?p(n,o-(e-d)):n}(e))}function y(e){return a=void 0,E&&r?w(e):(r=i=void 0,s)}function b(){var e=m(),n=g(e);if(r=arguments,i=this,c=e,n){if(void 0===a)return function(e){return d=e,a=setTimeout(A,t),l?w(e):s}(c);if(h)return a=setTimeout(A,t),w(c)}return void 0===a&&(a=setTimeout(A,t)),s}return t=f(t)||0,v(n)&&(l=!!n.leading,o=(h="maxWait"in n)?u(f(n.maxWait)||0,t):o,E="trailing"in n?!!n.trailing:E),b.cancel=function(){void 0!==a&&clearTimeout(a),d=0,r=c=i=a=void 0},b.flush=function(){return void 0===a?s:y(m())},b}},722:function(e,t){"use strict";var n=[new RegExp("^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)\n?</div>"),new RegExp("^(.+)\n")];t.failOnParseError=function(e){return function(e){var t;if(null===e)throw new Error("Parse error");var r=function(e){return"parsererror"===e.documentElement.tagName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===e.documentElement.namespaceURI?e.documentElement:("xml"===e.documentElement.tagName||"html"===e.documentElement.tagName)&&e.documentElement.childNodes&&e.documentElement.childNodes.length>0&&"parsererror"===e.documentElement.childNodes[0].nodeName?e.documentElement.childNodes[0]:"html"===e.documentElement.tagName&&e.documentElement.childNodes&&e.documentElement.childNodes.length>0&&"body"===e.documentElement.childNodes[0].nodeName&&e.documentElement.childNodes[0].childNodes&&e.documentElement.childNodes[0].childNodes.length&&"parsererror"===e.documentElement.childNodes[0].childNodes[0].nodeName?e.documentElement.childNodes[0].childNodes[0]:void 0}(e);if(void 0!==r)throw t=function(e){var t,r,i,o,s=(t=e,r=new XMLSerializer,Array.prototype.map.call(t.childNodes,(function(e){return r.serializeToString(e)})).join(""));for(i=0;i<n.length;i++)if(o=n[i].exec(s))return o[1]}(r)||"Parse error",new Error(t)}(e),e}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){"use strict";var e;n.r(r),function(e){e[e.VAST_XML_PARSING_ERROR=100]="VAST_XML_PARSING_ERROR",e[e.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",e[e.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",e[e.VAST_UNEXPECTED_AD_TYPE=200]="VAST_UNEXPECTED_AD_TYPE",e[e.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",e[e.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",e[e.VAST_UNEXPECTED_MEDIA_FILE=203]="VAST_UNEXPECTED_MEDIA_FILE",e[e.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",e[e.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",e[e.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",e[e.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",e[e.VIDEO_PLAY_ERROR=400]="VIDEO_PLAY_ERROR",e[e.VAST_MEDIA_FILE_NOT_FOUND=401]="VAST_MEDIA_FILE_NOT_FOUND",e[e.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",e[e.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",e[e.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",e[e.VAST_NONLINEAR_PLAYING_FAILED=500]="VAST_NONLINEAR_PLAYING_FAILED",e[e.VAST_NONLINEAR_DIMENSIONS_ERROR=501]="VAST_NONLINEAR_DIMENSIONS_ERROR",e[e.VAST_NONLINEAR_LOADING_FAILED=502]="VAST_NONLINEAR_LOADING_FAILED",e[e.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",e[e.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",e[e.VPAID_ERROR=901]="VPAID_ERROR"}(e||(e={}));const t=t=>Object.values(e).includes(t),i="complete",o="clickThrough",s="error",a="firstQuartile",c="impression",d="viewable",l="notViewable",h="viewUndetermined",u="midpoint",p="mute",m="pause",v="playerCollapse",f="exitFullscreen",E="playerExpand",w="fullscreen",g="progress",A="resume",y="rewind",b="skip",T="start",C="thirdQuartile",I="unmute",O="iconClick",_="iconView",S="closeLinear",R="creativeView";var N={clickThrough:o,closeLinear:S,complete:i,creativeView:R,error:s,exitFullscreen:f,firstQuartile:a,fullscreen:w,iconClick:O,iconView:_,impression:c,midpoint:u,mute:p,notViewable:l,otherAdInteraction:"otherAdInteraction",pause:m,playerCollapse:v,playerExpand:E,progress:g,resume:A,rewind:y,skip:b,start:T,thirdQuartile:C,timeSpentViewing:"timeSpentViewing",unmute:I,viewable:d,viewUndetermined:h};const L="acceptInvitation",k="adCollapse",V="close";var P,x={acceptInvitation:L,adCollapse:k,close:V},M=n(722);!function(e){e.CDATA="cdata",e.DOCUMENT="document",e.ELEMENT="element",e.TEXT="text"}(P||(P={}));const D=e=>{const t=(e=>{switch(e.nodeType){case 1:return P.ELEMENT;case 3:case 4:return P.TEXT;case 9:return P.DOCUMENT;default:throw new Error("Unsupported element type")}})(e),n={type:t};if(e instanceof Element){const t=(e=>0===e.attributes.length?void 0:Object.fromEntries(Array.from(e.attributes).map((e=>{var t;return[e.nodeName,null!==(t=e.nodeValue)&&void 0!==t?t:void 0]}))))(e);t&&(n.attributes=t),n.name=e.nodeName.toLowerCase()}else(e instanceof Text||e instanceof CDATASection)&&(n.text=(e=>{var t;return null===(t=e.nodeValue)||void 0===t?void 0:t.replace("<![CDATA[","").replace("]]>","").trim()})(e));const r=(e=>{var t,n;if(!e.hasChildNodes())return;const r=Array.from(e.childNodes).filter((e=>[1,3,4].includes(e.nodeType))),i=[];for(const e of r){const r=D(e);e instanceof Text&&!((null!==(n=null===(t=r.text)||void 0===t?void 0:t.length)&&void 0!==n?n:0)>0)||i.push(r)}return i})(e);return r&&(n.elements=r),n};var F=D;const U=e=>{var t;return null!==(t=e.elements)&&void 0!==t?t:[]},j=(e,t)=>U(e).find((({name:e=""})=>e.toUpperCase()===t.toUpperCase())),B=(e,t)=>"string"==typeof t?((e,t)=>U(e).filter((({name:e=""})=>e.toUpperCase()===t.toUpperCase())))(e,t):U(e),$=e=>U(e)[0],W=e=>{const t=e&&$(e);return t&&t.text},X=e=>{var t;return null!==(t=e.attributes)&&void 0!==t?t:{}},H=(e,t)=>X(e)[t],z=new DOMParser;var Y=e=>{if("string"==typeof e){const i=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,o=e.match(i);if(o){const e=(r=o[1],60*parseInt(r,10)*60*1e3+(n=o[2],60*parseInt(n,10)*1e3)+(t=o[3],1e3*parseInt(t,10))+(o[5]?parseInt(o[5],10):0));if(!isNaN(e))return e}}var t,n,r},q=e=>(e=>/^\d+(\.\d+)?%$/g.test(e))(e)?e:Y(e);const G=e=>j(e,"linear");var Q=e=>{const t=$(e),n=t&&j(t,"creatives");return n&&B(n).find(G)};const K=e=>{const{event:t,offset:n}=X(e),r=W(e);return{event:t,offset:n&&q(n),uri:r}};var J=(e,t)=>{const n=e&&Q(e),r=n&&j(n,"Linear"),i=r&&j(r,"TrackingEvents"),o=i&&B(i,"Tracking");if(o&&o.length>0){const e=o.map(K);if(!t)return e;const n=e.filter((({event:e})=>e===t));if(n.length>0)return n}};const Z=e=>{const t=`${e}`.match(/\d+/g);return parseInt((null==t?void 0:t[0])||"",10)},ee=e=>/\d+/.test(e)?Z(e):e;var te=e=>{const t=e&&Q(e),n=t&&j(t,"linear"),r=n&&j(n,"Icons"),i=r&&B(r,"Icon");if(i&&i.length>0)return i.map((e=>Object.assign(Object.assign(Object.assign(Object.assign({},(e=>{const{duration:t,height:n,offset:r,program:i,pxratio:o,width:s,xPosition:a="right",yPosition:c="top"}=X(e);return{duration:t&&Y(t)||void 0,height:n&&Z(n)||void 0,offset:r&&Y(r)||void 0,program:i,pxratio:o&&parseInt(o,10)||void 0,width:s&&Z(s)||void 0,xPosition:a&&ee(a),yPosition:c&&ee(c)}})(e)),(e=>{const t=j(e,"StaticResource"),n=j(e,"HTMLResource"),r=j(e,"IFrameResource");return t?{staticResource:W(t)}:n?{htmlResource:W(n)}:r?{iFrameResource:W(r)}:{staticResource:W(e)}})(e)),(e=>{const t=B(e,"IconViewTracking").map((e=>W(e))).filter(Boolean);return 0===t.length?{}:{iconViewTracking:t}})(e)),(e=>{const t=j(e,"IconClicks"),n=t&&j(t,"IconClickThrough"),r=t&&B(t,"IconClickTracking").map((e=>W(e))).filter(Boolean);return{iconClickThrough:n&&W(n),iconClickTracking:r&&r.length>0?r:void 0}})(e))))};const ne=e=>"string"==typeof e?"true"===e:Boolean(e),re=(e,t)=>{const n=H(e,"sequence"),r=H(t,"sequence"),i=n&&parseInt(n,10),o=r&&parseInt(r,10);return"string"!=typeof i||"string"!=typeof o?0:i<o?-1:i>o?1:0},ie=e=>{const t=e&&j(e,"VAST"),n=t&&B(t,"Ad");return n&&n.length>0?n:[]},oe=e=>{const t=H(e,"sequence"),n=t&&parseInt(t,10);if("number"==typeof n&&!isNaN(n))return n},se=e=>Boolean(oe(e)),ae=e=>{const t=ie(e);return Array.isArray(t)&&t.filter(se).length>1},ce=e=>Boolean(j(e||{},"Wrapper")),de=e=>{const t=j(e,"Wrapper"),n=t&&j(t,"VastAdTagUri");return n&&W(n)},le=e=>{const t=e&&$(e),n=t&&j(t,"ViewableImpression"),r=n&&B(n,"Viewable");if(r&&r.length>0)return r.map((e=>{var t;return null!==(t=W(e))&&void 0!==t?t:""})).filter(Boolean)},he=e=>{const t=e&&Q(e),n=t&&j(t,"UniversalAdId"),r=n&&W(n),i=t&&j(t,"Linear"),o=i&&j(i,"MediaFiles"),s=o&&B(o,"MediaFile");if(s&&s.length>0)return s.map((e=>{const t=W(e),{apiFramework:n,bitrate:i,codec:o,delivery:s,height:a,id:c,maintainAspectRatio:d,maxBitrate:l,minBitrate:h,scalable:u,type:p,width:m}=X(e);return{apiFramework:n,bitrate:i,codec:o,delivery:s,height:a,id:c,maintainAspectRatio:d,maxBitrate:l,minBitrate:h,scalable:u,src:t,type:p,universalAdId:r,width:m}}))},ue=e=>{let t=(e=>{const t=e&&Q(e),n=t&&j(t,"Linear"),r=n&&j(n,"MediaFiles"),i=r&&B(r,"InteractiveCreativeFile");if(i&&i.length>0)return i.map((e=>{const{apiFramework:t,type:n}=X(e);return{apiFramework:t,src:W(e),type:n}}))})(e);if(t)return t;const n=he(e);return n&&(t=n.filter((({apiFramework:e=""})=>"vpaid"===(null==e?void 0:e.toLowerCase()))).map((({apiFramework:e,src:t,type:n})=>({apiFramework:e,src:t,type:n}))),t.length>0)?t:void 0},pe=e=>{const t=e&&Q(e),n=t&&j(t,"Linear");return n&&j(n,"VideoClicks")},me=e=>{const t=pe(e),n=t&&j(t,"ClickThrough");return n&&W(n)},ve=e=>{const t=e&&Q(e),n=t&&j(t,"Linear"),r=n&&H(n,"skipoffset");return r&&q(r)};var fe=(e,t)=>{const n=new Image;return n.src=((e,t={})=>{let n=e;const r=(e=>{const t={};return Object.keys(e).forEach((n=>{t[n.toUpperCase()]=e[n]})),t})(t);return r.CACHEBUSTING||(r.CACHEBUSTING=Math.round(1e10*Math.random())),r.TIMESTAMP||(r.TIMESTAMP=(new Date).toISOString()),Object.keys(r).forEach((e=>{const t=encodeURIComponent(r[e]);n=n.replace(new RegExp("\\["+e+"\\]","gm"),t)})),n})(e,t),n},Ee=(e,{errorCode:t,tracker:n=fe})=>{e.forEach((({ad:e,parsedXML:r})=>{const i=e&&(e=>{const t=e&&$(e),n=t&&B(t,"Error");if(n&&n.length>0)return n.map((e=>{var t;return null!==(t=W(e))&&void 0!==t?t:""})).filter(Boolean)})(e)||(e=>{const t=e&&j(e,"VAST"),n=t&&B(t,"Error");if(n&&n.length>0)return n.map((e=>{var t;return null!==(t=W(e))&&void 0!==t?t:""})).filter(Boolean)})(r);i&&i.map((e=>e&&n(e,{errorCode:t})))}))},we=e=>(t,{data:n={},tracker:r=fe})=>{t.forEach((({ad:t})=>{const i=t&&e(t);i&&(i&&"string"==typeof i?r(i,n):Array.isArray(i)&&i.map((({uri:e})=>e&&r(e,n))))}))};const ge=(...e)=>t=>{const n=[];return e.length>0&&e.forEach((e=>{const r=e(t);Array.isArray(r)&&r.length>0&&n.push(...r.map((e=>({uri:e}))))})),n},Ae=e=>t=>J(t,e),ye={[o]:we(ge((e=>{const t=e&&pe(e),n=t&&B(t,"ClickTracking");if(n&&n.length>0)return n.map((e=>{var t;return null!==(t=W(e))&&void 0!==t?t:""})).filter(Boolean)}),(e=>{const t=pe(e),n=t&&B(t,"CustomClick");if(n&&n.length>0)return n.map((e=>{var t;return null!==(t=W(e))&&void 0!==t?t:""})).filter(Boolean)}))),[S]:we(Ae(S)),[i]:we(Ae(i)),[R]:we(Ae(R)),[s]:Ee,[f]:we(Ae(f)),[a]:we(Ae(a)),[w]:we(Ae(w)),[O]:(e,{data:t={},tracker:n=fe})=>{const{iconClickTracking:r}=t;if(Array.isArray(r))for(const e of r)n(e,Object.assign({},t))},[_]:(e,{data:t={},tracker:n=fe})=>{const{iconViewTracking:r}=t;if(Array.isArray(r))for(const e of r)n(e,Object.assign({},t))},[c]:we(ge((e=>{const t=e&&$(e),n=t&&B(t,"Impression");if(n&&n.length>0)return n.map((e=>{var t;return null!==(t=W(e))&&void 0!==t?t:""})).filter(Boolean)}))),[u]:we(Ae(u)),[p]:we(Ae(p)),[l]:we(ge((e=>{const t=e&&$(e),n=t&&j(t,"ViewableImpression"),r=n&&B(n,"NotViewable");if(r&&r.length>0)return r.map((e=>{var t;return null!==(t=W(e))&&void 0!==t?t:""})).filter(Boolean)}))),[m]:we(Ae(m)),[v]:we(Ae(v)),[E]:we(Ae(E)),[g]:(e,{data:t={},tracker:n=fe})=>{const{progressUri:r}=t;r&&n(r,Object.assign({},t))},[A]:we(Ae(A)),[y]:we(Ae(y)),[b]:we(Ae(b)),[T]:we(Ae(T)),[C]:we(Ae(C)),[I]:we(Ae(I)),[d]:we(ge(le)),[h]:we(ge((e=>{const t=e&&$(e),n=t&&j(t,"ViewableImpression"),r=n&&B(n,"ViewUndetermined");if(r&&r.length>0)return r.map((e=>{var t;return null!==(t=W(e))&&void 0!==t?t:""})).filter(Boolean)})))};const be=e=>t=>((e,t)=>{const n=e&&Q(e),r=n&&j(n,"NonLinearAds"),i=r&&j(r,"TrackingEvents"),o=i&&B(i,"Tracking");if(o&&o.length>0){const e=o.map((e=>{const{event:t}=X(e);return{event:t,uri:W(e)}}));if(!t)return e;const n=e.filter((({event:e})=>e===t));if(n.length>0)return n}})(t,e),Te={[L]:we(be(L)),[k]:we(be(k)),[V]:we(be(V))};var Ce=e=>e.contentDocument||e.contentWindow&&e.contentWindow.document;const Ie="srcdoc"in document.createElement("iframe");const Oe=()=>{const e=document.createElement("iframe");return e.setAttribute("sandbox","allow-forms allow-popups allow-scripts allow-same-origin"),e.setAttribute("loading","eager"),e.style.margin="0",e.style.padding="0",e.style.border="none",e.style.width="0",e.style.height="0",e.style.position="absolute",e};var _e,Se=(e,t)=>new Promise(((n,r)=>{const i=((e,t)=>`<!DOCTYPE html>\n<html>\n  <head><meta charset='UTF-8'></head>\n  <body style='margin:0;padding:0'>\n  <script type='text/javascript'>window.parent.postMessage('${e}_ready', '${t}');<\/script>\n  </body>\n</html>`)(t,(()=>{const e=window.location;return e.origin?e.origin:e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")})());let o=Oe();try{o.src="about:blank",e.appendChild(o);const t=Ce(o);if(!t)throw new TypeError("iframe content document is not a Document");t.write(i)}catch(t){e.removeChild(o),Ie?(o=Oe(),o.src="about:srcdoc",o.srcdoc=i,e.appendChild(o)):r(t)}const s=({data:e})=>{e===`${t}_ready`&&(window.removeEventListener("message",s),n(o))};window.addEventListener("message",s,!1)}));const Re=(e=>{let t=-1;return()=>"videoAdContainer_"+ ++t})(),Ne=Symbol("hidden");_e=Ne;var Le=class{constructor(e,t){if(this[_e]={destroyed:!1,id:Re(),iframe:void 0,readyPromise:void 0},!(e instanceof Element))throw new TypeError("placeholder is not an Element");this.element=(()=>{const e=document.createElement("div");return e.classList.add("mol-video-ad-container"),e.style.width="100%",e.style.height="100%",e})(),this.isOriginalVideoElement=Boolean(t),t?this.videoElement=t:(this.videoElement=((e=document)=>{const t=e.createElement("video");return t.style.width="100%",t.style.height="100%",t})(),this.element.appendChild(this.videoElement)),e.appendChild(this.element)}async addScript(e,t={}){var n;if(this.isDestroyed())throw new Error("VideoAdContainer has been destroyed");let{iframe:r}=this[Ne];r||(r=await Se(this.element,this[Ne].id),this[Ne].iframe=r,this.executionContext=r.contentWindow);const i=null===(n=Ce(r))||void 0===n?void 0:n.body;return((e,{async:t=!1,defer:n=!1,type:r,placeholder:i}={})=>{if(!e)throw new TypeError('Missing required "src" parameter');return new Promise(((o,s)=>{const a=document.createElement("script");let c=i;a.type=null!=r?r:"text/javascript",a.async=t,a.defer=n,a.onerror=()=>s(new URIError(`The script ${e} is not accessible.`)),a.onload=()=>o(a),c||(c=document.currentScript?document.currentScript.parentNode:document.head),a.src=e,null==c||c.appendChild(a)}))})(e,Object.assign({placeholder:i},t))}addSlot(e,t){if(this.isDestroyed())throw new Error("VideoAdContainer has been destroyed");this.slotElement||(this.slotElement=((e,t,n)=>{const r=document.createElement("DIV");return Object.assign(r.style,{border:"0px",cursor:"pointer",height:`${n}px`,left:"0px",margin:"0px",padding:"0px",position:"absolute",top:"0px",width:`${t}px`}),e.appendChild(r),r})(this.element,e,t))}destroy(){const e=new Promise((e=>{setTimeout((()=>{var t;null===(t=this.element.parentNode)||void 0===t||t.removeChild(this.element),e()}),1e3)}));return this.element.style.zIndex="-9999",this[Ne].destroyed=!0,e}isDestroyed(){return this[Ne].destroyed}};const ke={"3gp":"video/3gpp",avi:"video/x-msvideo",flv:"video/x-flv",m3u8:"application/x-mpegURL",m4v:"video/mp4",mov:"video/quicktime",mp4:"video/mp4",mpd:"application/dash+xml",ogv:"video/ogg",ts:"video/MP2T",webm:"video/webm",wmv:"video/x-ms-wmv"};var Ve=(e,t)=>{const{src:n,type:r}=t;return e.canPlayType(r||(e=>{const t=e.match(/\.([^./?]+)(\?[^/]+)?$/i),n=t&&t[1];return n&&ke[n]||"video/"+n})(n||""))};const Pe=e=>{const t=Number(e.width)||0,n=Number(e.height)||0;return{aspectRatio:n?Math.floor(t/n*10)/10:0,height:n,width:t}};const xe=(e,t)=>((e,t)=>{const n=Pe(t);return e.slice(0).sort(((e,t)=>{const r=Pe(e),i=Pe(t),o=Math.abs(n.width-r.width),s=Math.abs(n.width-i.width);return Math.abs(n.aspectRatio-r.aspectRatio)-Math.abs(n.aspectRatio-i.aspectRatio)||o-s}))})(e,t)[0];var Me=(e,t,n,{getMediaFile:r=xe})=>{const i=n.getBoundingClientRect(),o=he(e),s=null==o?void 0:o.filter((e=>Ve(t,e)));return s&&r(s,i)},De=(e,t,n)=>{const r=(...i)=>(e.removeEventListener(t,r),n(...i));return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}};const{progress:Fe}=N;var Ue=(e,t)=>(...n)=>{try{e(...n)}catch(e){null==t||t.error(e)}};const{fullscreen:je,exitFullscreen:Be,playerCollapse:$e,playerExpand:We}=N;const{pause:Xe,resume:He}=N;const{rewind:ze}=N;const{skip:Ye}=N,qe=()=>{const e=document.createElement("button");return e.classList.add("mol-vast-skip-control"),e.type="button",e.innerHTML="skip",e.style.position="absolute",e.style.bottom="15px",e.style.right="15px",e};const{error:Ge}=N;const Qe="volumeChanged",Ke="finish",Je="adProgress",{complete:Ze,firstQuartile:et,midpoint:tt,start:nt,thirdQuartile:rt}=N,it=(e,t)=>100*e/t,ot=(e,t)=>it(e,t)>=99;const{mute:st,unmute:at}=N,ct=e=>e.muted||0===e.volume;const{impression:dt,creativeView:lt}=N;var ht=(e,t)=>{let n=String(e);for(;n.length<t;)n="0"+n;return n},ut=e=>{const t=Math.floor(e/36e5),n=Math.floor(e/6e4%60),r=Math.floor(e/1e3%60),i=e%1e3;return ht(t,2)+":"+ht(n,2)+":"+ht(r,2)+"."+ht(i,3)};const{progress:pt}=N,mt=e=>1e3*e,vt=({offset:e,uri:t})=>{const n="number"==typeof e||Boolean(e&&(e=>/^\d+(\.\d+)?%$/g.test(e)&&!isNaN(parseFloat(e)))(e)),r="string"==typeof t&&t.length>0;return n&&r},ft=(e,t)=>"number"==typeof e?e:parseFloat(e)/100*t;const{clickThrough:Et}=N,wt=()=>{const e=document.createElement("a");return e.classList.add("mol-vast-clickthrough"),e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.left="0",e.style.top="0",e};var gt=[({videoElement:e,element:t},n,{clickThroughUrl:r,pauseOnAdClick:i=!0,createClickControl:o=wt}={})=>{const s=t||e.parentNode,a=o(),c=!document.body.contains(a);return c&&s.appendChild(a),r&&a instanceof HTMLAnchorElement&&(a.href=r,a.target="_blank"),a.onclick=t=>{t.stopPropagation(),e.paused&&i?(t.preventDefault(),e.play()):(i&&e.pause(),n(Et))},()=>{c&&s.removeChild(a)}},({videoElement:t},n)=>{const r=()=>{var r;const i=null!==(r=t.error)&&void 0!==r?r:void 0;i&&Object.defineProperty(i,"code",{get:()=>e.VAST_PROBLEM_DISPLAYING_MEDIA_FILE}),n(Ge,i)};return t.addEventListener("error",r),()=>{t.removeEventListener("error",r)}},({videoElement:e},t)=>{const n=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];let r=!1;const i=()=>{(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null)===e?(r=!0,t(We),t(je)):r&&(r=!1,t($e),t(Be))};for(const e of n)document.addEventListener(e,i);return()=>{for(const e of n)document.removeEventListener(e,i)}},({videoElement:e},t)=>{let n=!1;const r=()=>{const i=e.currentTime;!n&&i>0&&(n=!0,t(dt),t(lt),e.removeEventListener("timeupdate",r))};return e.addEventListener("timeupdate",r),()=>{e.removeEventListener("timeupdate",r)}},({videoElement:e},t)=>{let n=!1,r=!0;const i=()=>{n?r&&(r=!1,t(He)):(n=!0,r=!1)},o=()=>{r||(r=!0,t(Xe))};return e.addEventListener("play",i),e.addEventListener("pause",o),()=>{e.removeEventListener("play",i),e.removeEventListener("pause",o)}},({videoElement:e},t,{progressEvents:n=[]}={})=>{const{duration:r}=e,i=mt(r);let o=0,s=mt(e.currentTime),a=n.filter(vt).map((({offset:e,uri:t})=>({offset:ft(e,i),uri:t})));const c=()=>{const{currentTime:n}=e,r=Math.abs(n-s);o+=mt(r),s=n;const{stillPending:i,toCall:d}=a.reduce(((e,t)=>{const{offset:n}=t;return"number"==typeof n&&o>=n?e.toCall.push(t):e.stillPending.push(t),e}),{stillPending:[],toCall:[]});a=i,d.forEach((({uri:e})=>{t(pt,{contentplayhead:ut(o),progressUri:e})})),0===a.length&&e.removeEventListener("timeupdate",c)};return a.length>0&&e.addEventListener("timeupdate",c),()=>{e.removeEventListener("timeupdate",c)}},({videoElement:e},t)=>{let n=e.currentTime;const r=()=>{const r=e.currentTime-n;r<0&&Math.abs(r)>=1&&t(ze),n=e.currentTime};return e.addEventListener("timeupdate",r),()=>{e.removeEventListener("timeupdate",r)}},(e,t,{skipoffset:n,createSkipControl:r=qe}={})=>{if(!n)return()=>null;let i;const{videoElement:o,element:s}=e,a=()=>{const e=1e3*o.currentTime;!i&&"number"==typeof n&&e>=n&&(i=r(),i.onclick=e=>{var n;return null===(n=e.stopPropagation)||void 0===n||n.call(e),t(Ye),!1},s.appendChild(i),o.removeEventListener("timeupdate",a))};return o.addEventListener("timeupdate",a),()=>{o.removeEventListener("timeupdate",a),i&&s.removeChild(i)}},({videoElement:e},t)=>{let n=!1,r=!1,i=!1,o=!1,s=!1;const a={start:{isFired:e=>!n&&e>0,callback:()=>{n=!0,t(nt)}},firstQuartile:{isFired:(e,t)=>!r&&((e,t)=>it(e,t)>=25)(e,t),callback:()=>{r=!0,t(et)}},midpoint:{isFired:(e,t)=>!i&&((e,t)=>it(e,t)>=50)(e,t),callback:()=>{i=!0,t(tt)}},thirdQuartile:{isFired:(e,t)=>!o&&((e,t)=>it(e,t)>=75)(e,t),callback:()=>{o=!0,t(rt)}},complete:{isFired:(e,t)=>!s&&ot(e,t),callback:()=>{s=!0,t(Ze)}}},c=()=>{const n=e.duration,r=e.currentTime;for(const e in a)if(a[e].isFired(r,n)){a[e].callback();break}t(Je)},d=()=>{const n=e.duration,r=e.currentTime;!s&&ot(r,n)&&(s=!0,t(Ze)),e.removeEventListener("ended",d),e.removeEventListener("timeupdate",c)};return e.addEventListener("timeupdate",c),e.addEventListener("ended",d),()=>{e.removeEventListener("timeupdate",c),e.removeEventListener("ended",d)}},({videoElement:e},t)=>{let n=ct(e);const r=()=>{t(Qe),n&&!ct(e)?t(at):!n&&ct(e)&&t(st),n=ct(e)};return e.addEventListener("volumechange",r),()=>{e.removeEventListener("volumechange",r)}}],At=({vastChain:e,videoAdContainer:t,hooks:n,pauseOnAdClick:r},i)=>{const o=e[0].ad,s=o&&ve(o),a=o&&me(o),c=(e=>e.map((({ad:e})=>e)).reduce(((e,t)=>[...e,...t&&J(t,Fe)||[]]),[]).map((({offset:e,uri:t})=>({offset:e,uri:t}))))(e),d=Object.assign({clickThroughUrl:a,pauseOnAdClick:r,progressEvents:c,skipoffset:s},n),l=gt.map((e=>Ue(e(t,i,d))));return()=>l.forEach((e=>e()))};class yt extends Error{constructor(e){super(e),this.name="AdUnitError",Object.setPrototypeOf(this,yt.prototype)}}var bt=yt,Tt=n(296),Ct=n.n(Tt),It=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;const Ot=()=>{},_t=["style","clientWidth","clientHeight"],St=Symbol("mutationHandlers"),Rt=Symbol("mutationObserver"),Nt=Symbol("resizeHandlers"),Lt=Symbol("resizeElement");var kt=(e,t,{threshold:n=20}={})=>{((e,t)=>{if(!(e instanceof Element))throw new TypeError("Target is not an Element node");if(!(t instanceof Function))throw new TypeError("Callback is not a function")})(e,t);const r=({style:e,clientHeight:t,clientWidth:n})=>[e.width,e.height,n,t].join(".");let i=r(e);const o=Ct()((()=>{const n=r(e);n!==i&&(i=n,t())}),n),s=It?((e,t)=>{var n;if(!e[St]){e[St]=[];const t=()=>{var t;null===(t=e[St])||void 0===t||t.forEach((e=>e()))};e[Rt]=((e,t)=>{const n=new It((e=>{for(let n=0;n<e.length;n++){const{attributeName:r}=e[n];r&&_t.includes(r)&&t()}}));return n.observe(e,{attributes:!0,characterData:!1,childList:!0}),n})(e,t)}return null===(n=e[St])||void 0===n||n.push(t),()=>{var n,r,i;e[St]=null===(n=e[St])||void 0===n?void 0:n.filter((e=>e!==t)),0===(null===(r=e[St])||void 0===r?void 0:r.length)&&(null===(i=e[Rt])||void 0===i||i.disconnect(),delete e[St],delete e[Rt])}})(e,o):Ot,a=((e,t)=>{var n;if(!e[Nt]){e[Nt]=[];const t=()=>{var t;null===(t=e[Nt])||void 0===t||t.forEach((e=>e()))};e[Lt]=(e=>{const t=document.createElement("iframe");return t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; border: 0; overflow: hidden; pointer-events: none; z-index: -1;"),t.setAttribute("type","text/html"),t.setAttribute("loading","eager"),t.onload=()=>{t.contentWindow&&t.contentWindow.addEventListener("resize",e)},t.src="about:blank",t})(t),"static"===getComputedStyle(e).position&&(e.style.position="relative"),e.appendChild(e[Lt])}return null===(n=e[Nt])||void 0===n||n.push(t),()=>{var n,r;e[Nt]=null===(n=e[Nt])||void 0===n?void 0:n.filter((e=>e!==t)),0===(null===(r=e[Nt])||void 0===r?void 0:r.length)&&(e.removeChild(e[Lt]),delete e[Nt],delete e[Lt])}})(e,o);return()=>{s(),a()}},Vt=window.IntersectionObserver;const Pt=()=>{},xt=Symbol("intersectionHandlers"),Mt=Symbol("intersectionObserver");let Dt=[],Ft=[];var Ut=(e,t,{threshold:n=100,viewabilityOffset:r=.4}={})=>{if(((e,t)=>{if(!(e instanceof Element))throw new TypeError("Target is not an Element node");if(!(t instanceof Function))throw new TypeError("Callback is not a function")})(e,t),!Vt)return t(void 0),Pt;let i=!1;const o=Ct()((n=>{n.forEach((n=>{if(n.target===e){const e=!document.hidden&&n.intersectionRatio>r;e!==i&&(i=e,t(e))}})),Ft=n}),n),s=((e,t)=>{var n,r;if(!e[xt]){e[xt]=[];const t=(t,n)=>{var r;null===(r=e[xt])||void 0===r||r.forEach((e=>e(t,n)))},r={root:null,rootMargin:"0px",threshold:[...new Array(11)].map(((e,t)=>t/10))};e[Mt]=new Vt(t,r),null===(n=e[Mt])||void 0===n||n.observe(e)}return null===(r=e[xt])||void 0===r||r.push(t),()=>{var n,r,i;e[xt]=null===(n=e[xt])||void 0===n?void 0:n.filter((e=>e!==t)),0===(null===(r=e[xt])||void 0===r?void 0:r.length)&&(null===(i=e[Mt])||void 0===i||i.disconnect(),delete e[xt],delete e[Mt])}})(e,o),a=((e,t)=>{const n=()=>{Dt&&Dt.forEach((e=>e()))};return Dt.push(t),1===Dt.length&&document.addEventListener("visibilitychange",n),()=>{Dt=Dt.filter((e=>e!==t)),0===Dt.length&&document.removeEventListener("visibilitychange",n)}})(0,(()=>o(Ft)));return()=>{s(),a()}},jt=class{constructor(e){this.events={},this.logger=e||console}on(e,t){const n=this.events;return(n[e]||(n[e]=[])).push(t),this}removeListener(e,t){const n=this.events,r=n[e]||(n[e]=[]);return n[e]=r.filter((e=>e!==t&&e._!==t)),this}removeAllListeners(e){return e?delete this.events[e]:this.events={},this}once(e,t){const n=(...r)=>{this.removeListener(e,n),t(...r)};return n._=t,this.on(e,n)}emit(e,...t){const n=this.events,r=n[e]||(n[e]=[]),i=r.length>0;return r.forEach((e=>{try{e(...t)}catch(e){e instanceof Error&&this.logger.error(e,e.stack)}})),i}},Bt=({staticResource:e,htmlResource:t,iFrameResource:n}={})=>e||t||n||void 0;const $t="UNKNOWN",Wt=e=>1===e.length?e[0]:(e=>{const t=window.devicePixelRatio||0;return e.slice(0).sort(((e,n)=>Math.abs(t-(e.pxratio||0))-Math.abs(t-(n.pxratio||0))))})(e)[0];var Xt=e=>{const t=e.map((({ad:e})=>e)).filter(Boolean).reduce(((e,t)=>[...e,...te(t)||[]]),[]);if(t.length>0){const e=(e=>((e,t)=>{const n={};return e.filter((e=>{const r=t(e);return!(!r||n.hasOwnProperty(r)||(n[r]=!0,0))}))})(e,Bt))(t);return(e=>{const t=(e=>e.reduce(((e,t)=>{var n,r;const i=null!==(n=t.program)&&void 0!==n?n:$t;return null!==(r=e[i])&&void 0!==r||(e[i]=[]),e[i].push(t),e}),{}))(e);return Object.keys(t).reduce(((e,n)=>n===$t?[...e,...t[$t]]:[...e,Wt(t[n])]),[])})(e)}},Ht=(e,t)=>{let n,r,i=!0;const o=new Promise(((e,t)=>{n=e,r=t})),s=De(e,t,((...e)=>{i=!1,n(e)}));return{cancel:()=>{i&&(i=!1,s(),r(new Error("waitFor was canceled")))},promise:o}};class zt extends Error{constructor(e){super(e),this.name="FetchError",Object.setPrototypeOf(this,zt.prototype)}}var Yt=(e,{document:t,data:n})=>{const{height:r,width:i}=n,o=t.createElement("div");return i&&(o.style.width=`${i}px`),r&&(o.style.height=`${r}px`),(async e=>{const t=await fetch(e),n=t.headers.get("Content-Type");if(t.status>=400){const e=new zt(t.statusText);throw e.response=t,e}if(!n||!(e=>{const t=e.toLowerCase();return["text/plain","text/html"].some((e=>t.includes(e)))})(n)){const e=new zt(`fetchHtml error, invalid Content-Type ${n}`);throw e.response=t,e}return t.text()})(e).then((e=>{o.innerHTML=e,o.dispatchEvent(new CustomEvent("load"))})).catch((()=>{o.dispatchEvent(new CustomEvent("error"))})),o};const qt=document.createElement("div");const Gt=()=>{};var Qt=(e,{document:t,placeholder:n})=>new Promise(((r,i)=>{try{const o=((e,t)=>{const{staticResource:n,htmlResource:r,iFrameResource:i}=t;return n?((e,{document:t,data:n})=>{const{height:r,width:i}=n,o=t.createElement("img");return i&&(o.width=i),r&&(o.height=r),o.src=e,o})(n,{data:t,document:e}):r?Yt(r,{data:t,document:e}):i?((e,{document:t,data:n})=>{const{height:r,width:i}=n,o=t.createElement("iframe");return o.setAttribute("sandbox","allow-forms allow-popups allow-scripts"),o.setAttribute("loading","eager"),i&&(o.width=i.toString()),r&&(o.height=r.toString()),o.src=e,o.frameBorder="0",o.style.border="none",o})(i,{data:t,document:e}):qt})(t,e),s=Ht(o,"error"),a=Ht(o,"load"),c=()=>{n.contains(o)&&(n.removeChild(o),o.style.zIndex="0")};s.promise.then((()=>{a.cancel(),c(),i(new Error("Error loading resource"))})).catch(Gt),a.promise.then((()=>{s.cancel(),c(),r(o)})).catch(Gt),o.style.zIndex="-9999",n.appendChild(o)}catch(e){i(e)}}));const Kt=({height:e,width:t})=>e*t,Jt=({left:e,width:t})=>e+t,Zt=({left:e})=>e,en=({top:e})=>e,tn=({top:e,height:t})=>e+t;var nn=(e,t)=>{const n=((e,t)=>{const{drawnIcons:n,placeholder:r}=t,i=Kt(r.getBoundingClientRect());return Kt(e)+n.reduce(((e,t)=>{const{width:n,height:r}=t;return n&&r?e+Kt({width:n,height:r}):e}),0)<=.35*i})(e,t),r=((e,{placeholder:t})=>{const n=t.getBoundingClientRect();return e.left>=0&&e.left+e.width<=n.width&&e.top>=0&&e.top+e.height<=n.height})(e,t),i=((e,{drawnIcons:t})=>!t.some((t=>((e,t)=>Zt(e)<=Jt(t)&&Jt(e)>=Zt(t)&&tn(e)>=en(t)&&en(e)<=tn(t))(e,t))))(e,t);return n&&r&&i};const rn=()=>{};var on=async(e,t)=>{var n;const{placeholder:r}=t,i=await(async(e,t)=>{if(!e.element){const n=await Qt(e,t);(n instanceof HTMLIFrameElement||n instanceof HTMLImageElement)&&(n.width="100%",n.height="100%"),n.style.height="100%",n.style.width="100%",e.element=((e,t,{onIconClick:n=rn}={})=>{const r=document.createElement("a");return t.iconClickThrough&&(r.href=t.iconClickThrough,r.target="_blank"),t.iFrameResource&&(e.style.pointerEvents="none"),r.onclick=e=>{void 0!==Event.prototype.stopPropagation&&e.stopPropagation(),n(t)},r.appendChild(e),r})(n,e,t)}return e.element})(e,t),o=((e,t,{drawnIcons:n,placeholder:r})=>{const i=e.signature,o=t.getBoundingClientRect(),s=r.getBoundingClientRect(),a=e.width||o.width,c=e.height||o.height,d=e.xPosition||"right",l=e.yPosition||"top";let h,u;if((e=>!["left","right"].includes(String(e).toLowerCase()))(d))h=d;else{const e=n.filter((e=>e.xPosition===d&&e.yPosition===l));h=((e,t,n,r)=>{const i=n.reduce(((e,t)=>e+(t.width?t.width+1:0)),0);return"left"===e?i:r-i-t})(d,a,e,s.width)}var p,m,v;(e=>!["top","bottom"].includes(String(e).toLowerCase()))(l)?u=l:(p=l,m=c,v=s.height,u="top"===p?0:v-m);const f=`${h}-${u}_${a}x${c}`;return Object.assign(e,{height:c,left:h,signature:f,top:u,updated:i!==f,width:a})})(e,i,t);if(!nn(o,t))throw null===(n=i.parentNode)||void 0===n||n.removeChild(i),new Error("Icon can't be rendered");return i.parentNode&&!o.updated||r.appendChild(((e,t)=>{const{height:n,width:r,left:i,top:o,yPosition:s}=t;return e.style.position="absolute",e.style.left=`${i}px`,"bottom"===s?e.style.bottom="0":e.style.top=`${o}px`,e.style.height=`${n}px`,e.style.width=`${r}px`,e})(i,o)),o},sn=(e,{onIconClick:t,videoAdContainer:n,logger:r=console})=>{const{element:i,videoElement:o}=n,s=[],{iconsToShow:a,otherIcons:c}=e.reduce(((e,t)=>(((e,t)=>{const n=1e3*t.currentTime,r=1e3*t.duration,i="string"==typeof e.offset?parseInt(e.offset,10):e.offset||0,o=e.duration||r;return i<=n&&n-i<=o})(t,o)?e.iconsToShow.push(t):e.otherIcons.push(t),e)),{iconsToShow:[],otherIcons:[]});return c.forEach((({element:e})=>{var t;null===(t=null==e?void 0:e.parentNode)||void 0===t||t.removeChild(e)})),a.reduce(((e,n)=>e.then((()=>on(n,{document:document,drawnIcons:s,onIconClick:t,placeholder:i}))).then((e=>{s.push(e)})).catch((e=>r.log(e)))),Promise.resolve()).then((()=>s))};const an=Symbol("firstRenderPending"),cn=()=>{};var dn,ln,hn=(e,t)=>{var{videoAdContainer:n,onIconView:r=cn,onIconClick:i=cn}=t,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["videoAdContainer","onIconView","onIconClick"]);const{videoElement:s,element:a}=n;return e.forEach((e=>{e[an]=!0})),{drawIcons:async()=>{const t=await sn(e,Object.assign({onIconClick:i,videoAdContainer:n},o));a.dispatchEvent(new CustomEvent("iconsDrawn")),t.forEach((e=>{e[an]&&(r(e),e[an]=!1)}))},hasPendingIconRedraws:()=>((e,t)=>{const n=1e3*t.currentTime,r=1e3*t.duration,i=e.filter((e=>!e.offset||e.offset<n)),o=e.filter((e=>e.duration&&e.duration<r));return i.length>0||o.length>0})(e,s),removeIcons:()=>(e=>e.filter((({element:e})=>Boolean(null==e?void 0:e.parentNode))).forEach((({element:e})=>{var t;return null===(t=null==e?void 0:e.parentNode)||void 0===t?void 0:t.removeChild(e)})))(e)}},un=(e,t)=>{const n=window.screen;return e+100>n.width&&t+100>n.height?"fullscreen":e<400?"thumbnail":"normal"};const{start:pn,viewable:mn,notViewable:vn,viewUndetermined:fn,iconClick:En,iconView:wn}=N,gn=Symbol("_private"),An=Symbol("_protected");dn=gn,ln=An;var yn,bn=class extends jt{constructor(e,t,{viewability:n=!1,responsive:r=!1,logger:i=console,pauseOnAdClick:o=!0}={}){super(i),this[dn]={addIcons:()=>{if(!this.icons)return;const{drawIcons:e,hasPendingIconRedraws:t,removeIcons:n}=hn(this.icons,{logger:this.logger,onIconClick:e=>this.emit(En,{adUnit:this,data:e,type:En}),onIconView:e=>this.emit(wn,{adUnit:this,data:e,type:wn}),videoAdContainer:this.videoAdContainer});this[An].drawIcons=e,this[An].removeIcons=n,this[An].hasPendingIconRedraws=t,this[An].onFinishCallbacks.push(n)},setupViewableImpression:()=>{let e;const t=Ut(this.videoAdContainer.element,(t=>{this.isFinished()||this[An].viewable||("boolean"==typeof t?t?e=window.setTimeout(this[gn].handleViewableImpression,2e3,mn):clearTimeout(e):this[gn].handleViewableImpression(fn))}),{viewabilityOffset:.5});this[An].onFinishCallbacks.push((()=>{t(),clearTimeout(e),this[An].viewable||this[gn].handleViewableImpression(vn)}))},handleViewableImpression:e=>{this[An].viewable=Boolean(e),this.emit(e,{adUnit:this,type:e})},setupViewability:()=>{const e=Ut(this.videoAdContainer.element,(e=>{this.isFinished()||"boolean"==typeof e&&(e?this.resume():this.pause())}));this[An].onFinishCallbacks.push(e)},setupResponsive:()=>{const{element:e}=this.videoAdContainer;this[An].size={height:e.clientHeight,viewmode:un(e.clientWidth,e.clientHeight),width:e.clientWidth};const t=kt(e,(()=>{if(this.isFinished())return;const t=this[An].size,n=e.clientHeight,r=e.clientWidth;n===(null==t?void 0:t.height)&&r===(null==t?void 0:t.width)||this.resize(r,n,un(r,n))}));this[An].onFinishCallbacks.push(t)}},this[ln]={finished:!1,started:!1,viewable:!1,onErrorCallbacks:[],onFinishCallbacks:[],finish:()=>{this.isFinished()||(this[An].finished=!0,this[An].onFinishCallbacks.forEach((e=>e())),this.emit(Ke,{adUnit:this,type:Ke}))},throwIfCalled:()=>{throw new Error("VideoAdUnit method must be implemented on child class")},throwIfFinished:()=>{if(this.isFinished())throw new Error("VideoAdUnit is finished")}},this.vastChain=e,this.videoAdContainer=t,this.icons=Xt(e),this.pauseOnAdClick=o,this[An].onFinishCallbacks.push((e=>{let t=0,n=0;const r=()=>{e.duration-t>3&&(e.pause(),e.play(),e.currentTime=t)},i=()=>{const r=e.currentTime;Math.abs(r-t)>3?(n+=1,n>=2&&e.pause(),e.currentTime=t):t=r};return e.addEventListener("timeupdate",i),e.addEventListener("ended",r),()=>{e.removeEventListener("timeupdate",i),e.removeEventListener("ended",r)}})(this.videoAdContainer.videoElement)),this[gn].addIcons(),e.some((({ad:e})=>e&&le(e)))&&this.once(pn,this[gn].setupViewableImpression),n&&this.once(pn,this[gn].setupViewability),r&&this.once(pn,this[gn].setupResponsive)}start(){this[An].throwIfCalled()}resume(){this[An].throwIfCalled()}pause(){this[An].throwIfCalled()}skip(){this[An].throwIfCalled()}setVolume(e){this[An].throwIfCalled()}getVolume(){this[An].throwIfCalled()}cancel(){this[An].throwIfCalled()}duration(){this[An].throwIfCalled()}paused(){this[An].throwIfCalled()}currentTime(){this[An].throwIfCalled()}onFinish(e){if("function"!=typeof e)throw new TypeError("Expected a callback function");this[An].onFinishCallbacks.push(Ue(e,this.logger))}onError(e){if("function"!=typeof e)throw new TypeError("Expected a callback function");this[An].onErrorCallbacks.push(Ue(e,this.logger))}isFinished(){return this[An].finished}isStarted(){return this[An].started}async resize(e,t,n){var r,i,o,s;this[An].size={height:t,viewmode:n,width:e},this.isStarted()&&!this.isFinished()&&this.icons&&(await(null===(i=(r=this[An]).removeIcons)||void 0===i?void 0:i.call(r)),await(null===(s=(o=this[An]).drawIcons)||void 0===s?void 0:s.call(o)))}};const{complete:Tn,error:Cn,skip:In}=N,On=Symbol("_private");yn=On;var _n=class extends bn{constructor(n,r,i={}){super(n,r,i),this[yn]={handleMetric:(n,r)=>{var i;switch(n){case Tn:this[An].finish();break;case Cn:r instanceof Error&&(this.error=r,this.errorCode=(null===(i=this.error)||void 0===i?void 0:i.code)&&t(this.error.code)?this.error.code:e.VAST_PROBLEM_DISPLAYING_MEDIA_FILE),this[An].onErrorCallbacks.forEach((e=>e(this.error,{adUnit:this,vastChain:this.vastChain}))),this[An].finish();break;case In:this.cancel()}this.emit(n,{adUnit:this,data:r,type:n})},drawIcons:async()=>{var e,t,n,r;if(!this.isFinished()&&(await(null===(t=(e=this[An]).drawIcons)||void 0===t?void 0:t.call(e)),(null===(r=(n=this[An]).hasPendingIconRedraws)||void 0===r?void 0:r.call(n))&&!this.isFinished())){const{videoElement:e}=this.videoAdContainer;De(e,"timeupdate",this[On].drawIcons)}}},this.type="VAST";const{onFinishCallbacks:o}=this[An],{handleMetric:s}=this[On];this.hooks=i.hooks||{};const a=At({hooks:this.hooks,pauseOnAdClick:this.pauseOnAdClick,vastChain:this.vastChain,videoAdContainer:this.videoAdContainer},s);o.push(a)}async start(){if(this[An].throwIfFinished(),this.isStarted())throw new bt("VastAdUnit already started");const t=this.vastChain[0].ad,{videoElement:n,element:r}=this.videoAdContainer,i=t&&Me(t,n,r,this.hooks);if(i)this.icons&&await this[On].drawIcons(),(null==i?void 0:i.src)&&(n.src=i.src,this.assetUri=i.src),n.play();else{const t=new bt("Can't find a suitable media to play");t.code=e.VAST_LINEAR_ASSET_MISMATCH,this[On].handleMetric(Cn,t)}this[An].started=!0}resume(){this.videoAdContainer.videoElement.play()}pause(){this.videoAdContainer.videoElement.pause()}skip(){const e=this.vastChain[0].ad,t=e&&ve(e),n=1e3*this.currentTime();"number"==typeof t&&n>=t&&this[On].handleMetric(In)}paused(){return this.videoAdContainer.videoElement.paused}setVolume(e){this.videoAdContainer.videoElement.volume=e}getVolume(){return this.videoAdContainer.videoElement.volume}cancel(){this[An].throwIfFinished(),this.videoAdContainer.videoElement.pause(),this[An].finish()}duration(){return this.isStarted()?this.videoAdContainer.videoElement.duration:0}currentTime(){return this.isStarted()?this.videoAdContainer.videoElement.currentTime:0}async resize(e,t,n){if(await super.resize(e,t,n),this.isStarted()&&!this.isFinished()){const e=this.vastChain[0].ad,{videoElement:t,element:n}=this.videoAdContainer,r=e&&Me(e,t,n,this.hooks);r&&t.src!==r.src&&((e,t)=>{new Promise((n=>{const r={currentTime:e.currentTime,playing:!e.paused};r.playing&&e.pause(),t.src&&(e.src=t.src),e.load(),De(e,"loadeddata",(()=>{e.currentTime=r.currentTime,r.playing&&e.play(),n()}))}))})(t,r)}}};const Sn=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"];var Rn=({type:e})=>Sn.some((t=>t===e));const Nn="getAdIcons",Ln="AdLoaded",kn="AdStarted",Vn="AdStopped",Pn="AdSkipped",xn="AdSizeChange",Mn="AdDurationChange",Dn="AdRemainingTimeChange",Fn="AdVolumeChange",Un="AdImpression",jn="AdVideoStart",Bn="AdVideoFirstQuartile",$n="AdVideoMidpoint",Wn="AdVideoThirdQuartile",Xn="AdVideoComplete",Hn="AdClickThru",zn="AdUserAcceptInvitation",Yn="AdUserMinimize",qn="AdUserClose",Gn="AdPaused",Qn="AdPlaying",Kn="AdError",Jn=[Ln,kn,Vn,Pn,"AdSkippableStateChange",xn,"AdLinearChange",Mn,"AdExpandedChange",Dn,Fn,Un,jn,Bn,$n,Wn,Xn,Hn,"AdInteraction",zn,Yn,qn,Gn,Qn,"AdLog",Kn];var Zn=(e,t,n)=>new Promise(((r,i)=>{let o;const s=()=>{"number"==typeof n&&window.clearTimeout(o),e.unsubscribe(s,t),r()};"number"==typeof n&&(o=window.setTimeout((()=>{e.unsubscribe(s,t),i(new Error(`Timeout waiting for event '${t}'`))}),n)),e.subscribe(s,t)})),er=(e,t,n,...r)=>{const i=Zn(e,n,5e3),o=e[t];return null==o||o.apply(e,r),i};const tr=e=>{const t=e.split(".");return parseInt(t[0],10)};var nr;const{complete:rr,mute:ir,unmute:or,skip:sr,start:ar,firstQuartile:cr,pause:dr,resume:lr,impression:hr,midpoint:ur,thirdQuartile:pr,clickThrough:mr,error:vr,closeLinear:fr,creativeView:Er}=N,wr=Jn.filter((e=>e!==Ln)),gr=Symbol("_private");nr=gr;var Ar=class extends bn{constructor(n,r,i={}){super(n,r,i),this[nr]={evtHandler:{[Hn]:(e,t,n)=>{n&&this[gr].handleClickThrough(e),this.emit(mr,{adUnit:this,type:mr})},[Mn]:()=>{this.emit(Je,{adUnit:this,type:Je})},[Kn]:n=>{this.error=(n=>{const r=n instanceof Error?n:new bt("VPAID general error");return r.code&&t(r.code)||(r.code=e.VPAID_ERROR),r})(n),this.errorCode=this.error.code,this[An].onErrorCallbacks.forEach((e=>e(this.error,{adUnit:this,vastChain:this.vastChain}))),this[An].finish(),this.emit(vr,{adUnit:this,type:vr})},[Un]:()=>{this[gr].videoStart||this[gr].handleVpaidEvent(jn),this.emit(hr,{adUnit:this,type:hr})},[Gn]:()=>{this[gr].paused=!0,this.emit(dr,{adUnit:this,type:dr})},[Qn]:()=>{this[gr].paused=!1,this.emit(lr,{adUnit:this,type:lr})},[Dn]:()=>{this.emit(Je,{adUnit:this,type:Je})},[Pn]:()=>{this.cancel(),this.emit(sr,{adUnit:this,type:sr})},[kn]:()=>{this.emit(Er,{adUnit:this,type:Er})},[Vn]:()=>{this.emit(Vn,{adUnit:this,type:Vn}),this[An].finish()},[zn]:()=>{this.emit(L,{adUnit:this,type:L})},[qn]:()=>{this.emit(fr,{adUnit:this,type:fr}),this[An].finish()},[Yn]:()=>{this.emit(k,{adUnit:this,type:k})},[Xn]:()=>{this.emit(rr,{adUnit:this,type:rr})},[Bn]:()=>{this.emit(cr,{adUnit:this,type:cr})},[$n]:()=>{this.emit(ur,{adUnit:this,type:ur})},[jn]:()=>{this[gr].videoStart||(this[gr].videoStart=!0,this[gr].paused=!1,this.emit(ar,{adUnit:this,type:ar}))},[Wn]:()=>{this.emit(pr,{adUnit:this,type:pr})},[Fn]:()=>{const e=this.getVolume();this.emit(Qe,{adUnit:this,type:Qe}),0!==e||this[gr].muted||(this[gr].muted=!0,this.emit(ir,{adUnit:this,type:ir})),e>0&&this[gr].muted&&(this[gr].muted=!1,this.emit(or,{adUnit:this,type:or}))}},handleVpaidEvent:(e,...t)=>{const n=this[gr].evtHandler[e];n&&n(...t),this.emit(e,{adUnit:this,type:e})},handleClickThrough:e=>{if(this.paused()&&this.pauseOnAdClick)return void this.resume();const t=this.vastChain[0].ad,n="string"==typeof e&&e.length>0?e:t&&me(t);this.pauseOnAdClick&&this.pause(),n&&window.open(n,"_blank")},getIcons:()=>{var e;if(null===(e=this.creativeAd)||void 0===e?void 0:e[Nn])try{this.creativeAd[Nn]()||delete this.icons}catch(e){delete this.icons}},drawIcons:async()=>{var e,t,n,r;this.isFinished()||(await(null===(t=(e=this[An]).drawIcons)||void 0===t?void 0:t.call(e)),(null===(r=(n=this[An]).hasPendingIconRedraws)||void 0===r?void 0:r.call(n))&&!this.isFinished()&&setTimeout(this[gr].drawIcons,500))},muted:!1,paused:!0},this.type="VPAID",this[gr].loadCreativePromise=(async(e,t)=>{const n=(e[0].ad&&ue(e[0].ad)||[]).filter(Rn)[0];if(!n||!n.src)throw new TypeError("VastChain does not contain a supported vpaid creative");const{src:r,type:i}=n;return await t.addScript(r,{type:i}),t.executionContext.getVPAIDAd()})(n,r)}async start(){if(this[An].throwIfFinished(),this.isStarted())throw new Error("VpaidAdUnit already started");try{this.creativeAd=await this[gr].loadCreativePromise;const e=Zn(this.creativeAd,Ln);for(const e of wr)this.creativeAd.subscribe(this[gr].handleVpaidEvent.bind(this,e),e);if(this[gr].getIcons(),((e,t)=>{const n=e.handshakeVersion(t);if(!((e,t)=>{const n=tr(t);return!(n<1)&&n<=tr(e)})(t,n))throw new Error(`Creative Version '${n}' not supported`)})(this.creativeAd,"2.0"),((e,t,n)=>{const{width:r,height:i}=t.element.getBoundingClientRect(),o=un(r,i),s=(e=>{const t=(e=>{const t=/<Linear([\s\S]*)<\/Linear/gm.exec(e);return null==t?void 0:t[1]})(e),n=t&&(e=>{const t=/<AdParameters[\s\w="]*>([\s\S]*)<\/AdParameters>/gm.exec(e);return null==t?void 0:t[1].replace(/[\n\s]*<!\[CDATA\[[\n\s]*/,"").replace(/[\n\s]*\]\]>[\n\s]*$/,"").replace(/\]\]\]\]><!\[CDATA\[>/,"]]>").trim()})(t),r=!!t&&(e=>{const t=/<AdParameters[\s]*xmlEncoded="(.*?)">/gim.exec(e);return"true"===(null==t?void 0:t[1])})(t);return{AdParameters:n,xmlEncoded:r}})(n[0].XML);t.addSlot(r,i);const a={slot:t.slotElement,videoSlot:t.videoElement,videoSlotCanAutoPlay:t.isOriginalVideoElement};e.initAd(r,i,o,-1,s,a)})(this.creativeAd,this.videoAdContainer,this.vastChain),await e,!this.videoAdContainer.isDestroyed())try{const{videoElement:e}=this.videoAdContainer;e.muted?(this[gr].muted=!0,this.setVolume(0)):this.setVolume(e.volume),await er(this.creativeAd,"startAd",kn),this.icons&&await this[gr].drawIcons(),this[An].started=!0}catch(e){this.cancel()}}catch(e){throw this[gr].handleVpaidEvent(Kn,e),e}}resume(){var e;null===(e=this.creativeAd)||void 0===e||e.resumeAd()}pause(){var e;null===(e=this.creativeAd)||void 0===e||e.pauseAd()}skip(){var e;null===(e=this.creativeAd)||void 0===e||e.skipAd()}paused(){return this.isFinished()||this[gr].paused}setVolume(e){var t;null===(t=this.creativeAd)||void 0===t||t.setAdVolume(e)}getVolume(){return this.creativeAd?this.creativeAd.getAdVolume():0}async cancel(){var e;this[An].throwIfFinished();try{const t=this.creativeAd&&Zn(this.creativeAd,Vn,3e3);null===(e=this.creativeAd)||void 0===e||e.stopAd(),await t}catch(e){this[An].finish()}}duration(){if(!this.creativeAd)return 0;const e=this.creativeAd.getAdDuration();return e<0?0:e}currentTime(){if(!this.creativeAd)return 0;const e=this.creativeAd.getAdRemainingTime();return e<0?0:this.duration()-e}async resize(e,t,n){if(await super.resize(e,t,n),this.creativeAd){if(this.isStarted()&&!this.isFinished()){const n=this.videoAdContainer.slotElement;n&&(n.style.height=`${t}px`,n.style.width=`${e}px`)}return er(this.creativeAd,"resizeAd",xn,e,t,n)}}},yr=function(e,t,n){const{tracker:r,type:i}=n,o="VPAID"===i?new Ar(e,t,n):new _n(e,t,n);return Object.values(N).forEach((t=>o.on(t,(t=>{const{type:n,data:i}=t,s={data:i,errorCode:o.errorCode,tracker:r};((e,t,{data:n,errorCode:r,tracker:i=fe,logger:o=console})=>{const s=ye[e];s?s(t,{data:Object.assign(Object.assign({},n),{errorCode:r}),errorCode:r,tracker:i}):o.error(`Event '${e}' cannot be tracked`)})(n,e,s)})))),Object.values(x).forEach((t=>o.on(t,(t=>{const n={data:t.data,tracker:r};((e,t,{data:n,tracker:r=fe,logger:i=console})=>{const o=Te[e];o?o(t,{data:Object.assign({},n),tracker:r}):i.error(`Event '${e}' cannot be tracked`)})(t.type,e,n)})))),o};class br extends Error{constructor(e){super(e),this.name="VastError",Object.setPrototypeOf(this,br.prototype)}}var Tr=br;const Cr=(e,{onAdReady:t})=>new Promise(((n,r)=>{const i=e=>()=>r(new Error(`Ad unit start rejected due to event '${e}'`));e.onError(r),e.on(T,(()=>n(e))),e.on(qn,i(qn)),e.on(S,i(S)),e.on(Vn,i(Vn)),t(e),e.start()}));var Ir=async(t,n,r)=>{((e,t)=>{if(!Array.isArray(e)||0===e.length)throw new TypeError("Invalid vastChain");if(!(t instanceof Le))throw new TypeError("Invalid VideoAdContainer")})(t,n);try{return await((t,n,r)=>{const i=t[0].ad;if(!i||!Boolean(ue(i))){const t=new Tr("No valid creative found in the passed VAST chain");throw t.code=e.VAST_MEDIA_FILE_NOT_FOUND,t}const o=yr(t,n,Object.assign(Object.assign({},r),{type:"VPAID"}));return Cr(o,r)})(t,n,r)}catch(e){const i=t[0].ad;if(i&&((e,t)=>{const n=he(e);return!!n&&n.some((e=>Ve(t,e)))})(i,n.videoElement))return((e,t,n)=>{const r=yr(e,t,Object.assign(Object.assign({},n),{type:"VAST"}));return Cr(r,n)})(t,n,r);throw e}},Or=async(t,n,r)=>{let i;try{const{timeout:o}=r;i=((e,t)=>{if(!e)throw new TypeError("placeholder is required");return new Le(e,t)})(n,r.videoElement);let s=Ir(t,i,r);if("number"==typeof o){let n,i=!1;const o=new Promise(((o,s)=>{n=window.setTimeout((()=>{const{tracker:n}=r;Ee(t,{errorCode:e.VAST_MEDIA_LOAD_TIMEOUT,tracker:n}),i=!0,s(new Error("Timeout while starting the ad"))}),r.timeout)}));s=Promise.race([s.then((e=>(i?e.isStarted()&&e.cancel():clearTimeout(n),e))),o])}const a=await s;return a.onFinish((()=>{null==i||i.destroy()})),a}catch(e){throw null==i||i.destroy(),e}};class _r extends Error{constructor(e){super(e),this.name="FetchError",Object.setPrototypeOf(this,_r.prototype)}}const Sr=Symbol("requested"),Rr=e=>{e[Sr]=!0},Nr=t=>{try{return((e,t)=>{const n=e.parseFromString(t,"application/xml");return M.failOnParseError(n),F(n)})(z,t)}catch(t){throw t.code=e.VAST_XML_PARSING_ERROR,t}},Lr=async(n,r,i=[])=>{var o;const s={requestTag:n};let a,c;try{const t=((e,t)=>{const n=e[0],r=Boolean(n)&&n.ad&&ce(n.ad)&&n.ad?(e=>{const t=j(e,"Wrapper"),n={};if(t){const{allowMultipleAds:e,fallbackOnNoAd:r,followAdditionalWrappers:i}=X(t);e&&(n.allowMultipleAds=ne(e)),r&&(n.fallbackOnNoAd=ne(r)),i&&(n.followAdditionalWrappers=ne(i))}return n})(n.ad):{};return Object.assign(Object.assign({},r),t)})(i,r);((t,{wrapperLimit:n=5})=>{if(t.length>n){const t=new Tr("Wrapper Limit reached");throw t.code=e.VAST_TOO_MANY_REDIRECTS,t}})(i,t);let o=(async(t,n)=>{var r;let i;try{i=await(async(e,t={})=>{const n=Object.assign({},{credentials:"include"},t),r=await window.fetch(e,n);if(r.status>=400){const e=new _r(r.statusText);throw e.response=r,e}return r})(t,n);const e=await i.text();return{response:i,XML:e}}catch(t){throw t.code=e.VAST_NONLINEAR_LOADING_FAILED,null!==(r=t.response)&&void 0!==r||(t.response=i),t}})(n,t);"number"==typeof t.timeout&&(c=t.timeout,a=Date.now(),o=Promise.race([o,new Promise(((t,n)=>{setTimeout((()=>{const t=new Tr("RequestAd timeout");t.code=e.VAST_LOAD_TIMEOUT,n(t)}),c)}))]));const{response:d,XML:l}=await o;return s.response=d,s.XML=l,s.parsedXML=Nr(s.XML),s.ad=(t=>{try{const e=(e=>{const t=ie(e);if(Array.isArray(t)&&t.length>0)return ae(e)?t.filter(se).sort(re)[0]:t[0]})(t);if(e)return Rr(e),e;throw new Error("No Ad")}catch(t){throw t.code=e.VAST_NO_ADS_AFTER_WRAPPER,t}})(s.parsedXML),(({ad:t,parsedXML:n},{allowMultipleAds:r=!0,followAdditionalWrappers:i=!0})=>{if(!ce(t)&&!(e=>Boolean(j(e||{},"Inline")))(t)){const t=new Tr("Invalid VAST, ad contains neither Wrapper nor Inline");throw t.code=e.VAST_SCHEMA_VALIDATION_ERROR,t}if(ae(n)&&!r){const t=new Tr("Multiple ads are not allowed");throw t.code=e.VAST_UNEXPECTED_MEDIA_FILE,t}if(ce(t)&&!i){const t=new Tr("To follow additional wrappers is not allowed");throw t.code=e.VAST_UNEXPECTED_AD_TYPE,t}})(s,t),ce(s.ad)?(a&&c&&(c-=Date.now()-a),Lr(de(s.ad),Object.assign(Object.assign({},t),{timeout:c}),[s,...i])):[s,...i]}catch(n){return t(n.code)||(n.code=e.UNKNOWN_ERROR),s.errorCode=n.code,s.error=n,null!==(o=s.response)&&void 0!==o||(s.response=n.response),[s,...i]}};var kr=Lr;const Vr=(e,t)=>{(e=>{if(!Array.isArray(e))throw new TypeError("Invalid VAST chain");if(0===e.length)throw new Error("No next ad to request")})(e);const n=e[0],r=(({ad:e,parsedXML:t},{fallbackOnNoAd:n=!0,useAdBuffet:r=!1})=>{const i=ie(t).filter((e=>!(e=>Boolean(e[Sr]))(e)));let o;return ae(t)?(r&&(o=i.filter((e=>!se(e)))[0]),e&&!o&&(o=((e,t)=>{const n=(oe(e)||0)+1;return t.find((e=>oe(e)===n))})(e,i))):i.length>0&&n&&(o=i[0]),o})(n,t);if(r){const i=[Object.assign({},n,{ad:r}),...e.slice(1)];return Rr(r),ce(r)?kr(de(r),t,i):Promise.resolve(i)}return Vr(e.slice(1),t)};var Pr=Vr;const xr=e=>(...t)=>{"function"==typeof e&&e(...t)},Mr=async(n,r,i,o)=>{var s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(i,[]);let a,c,d;const{onAdStart:l,onError:h,onRunFinish:u}=s;try{if("number"==typeof s.timeout&&(c=Date.now()),a=await n(),o())return void u();if(s.timeout&&c){const e=Date.now();s.timeout-=e-c,c=e}if(((t,n)=>{var r;if(!t||0===t.length)throw new Error("Invalid VastChain");const i=t[0];if(!n.vpaidEnabled&&(e=>Boolean(e[0].ad&&ue(e[0].ad)))(t)){const t=new Tr("VPAID ads are not supported by the current player");t.code=e.VAST_UNEXPECTED_AD_TYPE,i.errorCode=e.VAST_UNEXPECTED_AD_TYPE,i.error=t}if(i.error)throw i.error;"function"==typeof(null===(r=n.hooks)||void 0===r?void 0:r.validateVastResponse)&&n.hooks.validateVastResponse(t)})(a,s),d=await Or(((e,{hooks:t})=>"function"==typeof(null==t?void 0:t.transformVastResponse)?t.transformVastResponse(e):e)(a,s),r,Object.assign({},s)),o())return d.cancel(),void u();d.onError(h),d.onFinish(u),l(d)}catch(n){if(((n,r,i)=>{var o;let s=(null===(o=null==r?void 0:r[0])||void 0===o?void 0:o.errorCode)||(null==n?void 0:n.code);r&&s&&(t(s)||(s=e.UNKNOWN_ERROR),Ee(r,{errorCode:s,tracker:i}))})(n,a,s.tracker),h(n,{adUnit:d,vastChain:a}),!a||o())return void u();if(s.timeout&&c&&(s.timeout-=Date.now()-c),c&&s.timeout&&s.timeout<=0)return void u();Mr((()=>Pr(a,s)),r,Object.assign({},s),o)}};var Dr=(e,t,n)=>{let r,i=!1;const o=xr(n.onAdStart),s=Object.assign(Object.assign({vpaidEnabled:!0},n),{onAdReady:xr(n.onAdReady),onAdStart:e=>{r=e,o(r)},onError:xr(n.onError),onRunFinish:xr(n.onRunFinish)});return n.videoElement&&n.videoElement.paused&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&n.videoElement.load(),Mr((()=>kr(e,s)),t,s,(()=>i)),()=>{i=!0,r&&!r.isFinished()&&r.cancel()}};document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#adTag"),t=document.querySelector(".vast-test-btn"),n=document.querySelector(".vast-media video"),r=document.querySelector(".video-ad-container");let i;const o=e=>{i=e,console.log("### onAdReady",i);const t=e=>{console.log(`### ${e.type}`,e.adUnit)};["pause","resume","finish","impression","start","skip","firstQuartile","midpoint","thirdQuartile","complete"].forEach((e=>{i.on(e,t)}))},s=()=>{const t=e.value,i=n.src,s=()=>{n.play(),n.removeEventListener("contentloadedmetadata",s),n.removeEventListener("canplay",s)};r.classList.add("active"),n.pause(),n.currentTime=0,console.log("### adTag",t),Dr(t,r,{onAdReady:o,onError:e=>{console.log("### onError",e)},onRunFinish:()=>{console.log("### onRunFinish"),r.classList.remove("active"),n.src===i?n.play():(n.addEventListener("contentloadedmetadata",s),n.addEventListener("canplay",s),n.src=i,n.load())},timeout:15e3,videoElement:n,credentials:"omit"})};e.addEventListener("change",(()=>{e.value?(t.classList.add("active"),t.addEventListener("click",s)):(t.classList.remove("active"),t.removeEventListener("click",s))}))}))}(),r}()}));
//# sourceMappingURL=demo.js.map