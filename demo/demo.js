!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../",n(n.s=1)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return xi});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};var o,a=(function(e){!function(t){var n,i=Object.prototype,o=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag",l=t.regeneratorRuntime;if(l)e.exports=l;else{(l=t.regeneratorRuntime=e.exports).wrap=b;var d="suspendedStart",f="suspendedYield",h="executing",p="completed",v={},m={};m[u]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(O([])));w&&w!==i&&o.call(w,u)&&(m=w);var g=A.prototype=x.prototype=Object.create(m);k.prototype=g.constructor=A,A.constructor=k,A[s]=k.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(g),e},l.awrap=function(e){return{__await:e}},C(T.prototype),T.prototype[c]=function(){return this},l.AsyncIterator=T,l.async=function(e,t,n,r){var i=new T(b(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},C(g),g[s]="Generator",g[u]=function(){return this},g.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return u.type="throw",u.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function b(e,t,n,r){var i=t&&t.prototype instanceof x?t:x,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return _()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=L(a,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=E(e,t,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function E(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function x(){}function k(){}function A(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function T(e){var t;this._invoke=function(n,i){function a(){return new Promise(function(t,a){!function t(n,i,a,u){var c=E(e[n],e,i);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"===(void 0===l?"undefined":r(l))&&o.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,a,u)},function(e){t("throw",e,a,u)}):Promise.resolve(l).then(function(e){s.value=e,a(s)},u)}u(c.arg)}(n,i,t,a)})}return t=t?t.then(a,a):a()}}function L(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,L(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=E(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,v;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:_}}function _(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())}(o={exports:{}},o.exports),o.exports),u=function(){return this}()||Function("return this")(),c=u.regeneratorRuntime&&Object.getOwnPropertyNames(u).indexOf("regeneratorRuntime")>=0,s=c&&u.regeneratorRuntime;u.regeneratorRuntime=void 0;var l=a;if(c)u.regeneratorRuntime=s;else try{delete u.regeneratorRuntime}catch(e){u.regeneratorRuntime=void 0}var d,f,h,p,v=l,m={clickThrough:"clickThrough",closeLinear:"closeLinear",complete:"complete",creativeView:"creativeView",error:"error",exitFullscreen:"exitFullscreen",firstQuartile:"firstQuartile",fullscreen:"fullscreen",iconClick:"iconClick",iconView:"iconView",impression:"impression",midpoint:"midpoint",mute:"mute",notViewable:"notViewable",otherAdInteraction:"otherAdInteraction",pause:"pause",playerCollapse:"playerCollapse",playerExpand:"playerExpand",progress:"progress",resume:"resume",rewind:"rewind",skip:"skip",start:"start",thirdQuartile:"thirdQuartile",timeSpentViewing:"timeSpentViewing",unmute:"unmute",viewable:"viewable",viewUndetermined:"viewUndetermined"},y="acceptInvitation",w="adCollapse",g={acceptInvitation:y,adCollapse:w,close:"close"},b=[new RegExp("^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)\n?</div>"),new RegExp("^(.+)\n")],E=function(e){var t,n,r,i,o=(t=e,n=new XMLSerializer,Array.prototype.map.call(t.childNodes,function(e){return n.serializeToString(e)}).join(""));for(r=0;r<b.length;r++)if(i=b[r].exec(o))return i[1]},x=function(e){return function(e){var t;if(null===e)throw new Error("Parse error");var n=function(e){return"parsererror"===e.documentElement.tagName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===e.documentElement.namespaceURI?e.documentElement:("xml"===e.documentElement.tagName||"html"===e.documentElement.tagName)&&e.documentElement.childNodes&&e.documentElement.childNodes.length>0&&"parsererror"===e.documentElement.childNodes[0].nodeName?e.documentElement.childNodes[0]:"html"===e.documentElement.tagName&&e.documentElement.childNodes&&e.documentElement.childNodes.length>0&&"body"===e.documentElement.childNodes[0].nodeName&&e.documentElement.childNodes[0].childNodes&&e.documentElement.childNodes[0].childNodes.length&&"parsererror"===e.documentElement.childNodes[0].childNodes[0].nodeName?e.documentElement.childNodes[0].childNodes[0]:void 0}(e);if(void 0!==n)throw t=E(n)||"Parse error",new Error(t)}(e),e},k="document",A="element",C="text",T=function e(t){var n=function(e){if(1===e.nodeType)return A;if(3===e.nodeType||4===e.nodeType)return C;if(9===e.nodeType)return k;throw new Error("Unsupported element type")}(t),r={type:n};if(n===A){if(r.name=t.nodeName.toLowerCase(),t.attributes.length>0){r.attributes={};var i=!0,o=!1,a=void 0;try{for(var u,c=Array.from(t.attributes)[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value;r.attributes[s.nodeName]=s.nodeValue}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}}}else n===C&&(r.text=t.nodeValue.replace("<![CDATA[","").replace("]]>","").trim());if(t.hasChildNodes()){var l=Array.from(t.childNodes).filter(function(e){return[1,3,4].includes(e.nodeType)}),d=[];r.elements=d;var f=!0,h=!1,p=void 0;try{for(var v,m=l[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var y=e(v.value);(y.type!==C||y.text.length>0)&&d.push(y)}}catch(e){h=!0,p=e}finally{try{!f&&m.return&&m.return()}finally{if(h)throw p}}}return r},L=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).elements;return void 0===e?[]:e},I=function(e,t){return L(e).find(function(e){var n=e.name;return(void 0===n?"":n).toUpperCase()===t.toUpperCase()})},P=function(e,t){return"string"==typeof t?function(e,t){return L(e).filter(function(e){var n=e.name;return(void 0===n?"":n).toUpperCase()===t.toUpperCase()})}(e,t):L(e)},S=function(e){return L(e)[0]||null},O=function(e){var t=e&&S(e);return t&&t.text||null},_=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).attributes;return void 0===e?{}:e},U=function(e,t){return _(e)[t]},F=new DOMParser,j=function(e){return function(e,t){var n=e.parseFromString(t,"application/xml");return x(n),T(n)}(F,e)},V=function(e){if("string"==typeof e){var t=e.match(/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/);if(t){var n=(o=t[1],60*parseInt(o,10)*60*1e3+(i=t[2],60*parseInt(i,10)*1e3)+(r=t[3],1e3*parseInt(r,10))+parseInt(t[5]||0,10));if(!isNaN(n))return n}}var r,i,o;return null},R=function(e){return function(e){return/^\d+(\.\d+)?%$/g.test(e)}(e)?e:V(e)},B=function(e){var t=S(e),n=t&&I(t,"creatives");return n&&P(n).find(function(e){return I(e,"linear")})||null},N=function(e,t){var n=e&&B(e);if(n){var r=I(n,"Linear"),i=r&&I(r,"TrackingEvents"),o=i&&P(i,"Tracking");if(o&&o.length>0){var a=o.map(function(e){var t=_(e),n=t.event,r=t.offset,i=O(e);return{event:n,offset:r&&R(r),uri:i}});if(!t)return a;var u=a.filter(function(e){return e.event===t});if(u.length>0)return u}}return null},M=function(e,t){var n=e&&B(e);if(n){var r=I(n,"NonLinearAds"),i=r&&I(r,"TrackingEvents"),o=i&&P(i,"Tracking");if(o&&o.length>0){var a=o.map(function(e){return{event:_(e).event,uri:O(e)}});if(!t)return a;var u=a.filter(function(e){return e.event===t});if(u.length>0)return u}}return null},D=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),u=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}},z=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},W=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),H=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},G=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},X=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t},$=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},K=function(e){var t=(""+e).match(/\d+/g);return parseInt(t[0],10)},Y=function(e){return/\d+/.test(e)?K(e):e},J=function(e){var t=e&&B(e),n=t&&I(t,"linear"),r=n&&I(n,"Icons"),i=r&&P(r,"Icon");return i&&i.length>0?i.map(function(e){return q({},function(e){var t=_(e),n=t.duration,r=t.height,i=t.offset,o=t.program,a=t.pxratio,u=t.width,c=t.xPosition,s=void 0===c?"right":c,l=t.yPosition,d=void 0===l?"top":l;return{duration:n&&V(n),height:r&&K(r),offset:i&&V(i),program:o,pxratio:a&&parseInt(a,10),width:u&&K(u),xPosition:s&&Y(s),yPosition:d&&Y(d)}}(e),function(e){var t=I(e,"StaticResource"),n=I(e,"HTMLResource"),r=I(e,"IFrameResource");return t?{staticResource:O(t)}:n?{htmlResource:O(n)}:r?{iFrameResource:O(r)}:{staticResource:O(e)}}(e),function(e){var t=P(e,"IconViewTracking").map(function(e){return O(e)});return 0===t.length?{}:{iconViewTracking:t}}(e),function(e){var t=I(e,"IconClicks"),n=t&&I(t,"IconClickThrough"),r=t&&P(t,"IconClickTracking").map(function(e){return O(e)});return{iconClickThrough:n&&O(n),iconClickTracking:r&&r.length>0?r:void 0}}(e))}):null},Z=function(e){return"string"==typeof e?"true"===e:Boolean(e)},ee=function(e,t){var n=parseInt(U(e,"sequence"),10),r=parseInt(U(t,"sequence"),10);return n<r?-1:n>r?1:0},te=function(e){var t=e&&I(e,"VAST"),n=t&&P(t,"Ad");return n&&n.length>0?n:[]},ne=function(e){var t=e&&I(e,"VAST");if(t){var n=I(t,"Error");if(n)return O(n)}return null},re=function(e){var t=parseInt(U(e,"sequence"),10);return"number"!=typeof t||isNaN(t)?null:t},ie=function(e){return Boolean(re(e))},oe=function(e){var t=te(e);return Array.isArray(t)&&t.filter(ie).length>1},ae=function(e){var t=te(e);return Array.isArray(t)&&t.length>0?oe(e)?t.filter(ie).sort(ee)[0]:t[0]:null},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Boolean(I(e||{},"Wrapper"))},ce=function(e){return Boolean(I(e||{},"Inline"))},se=function(e){var t=I(e,"Wrapper"),n=t&&I(t,"VastAdTagUri");return n&&O(n)||null},le=function(e){var t=_(I(e,"Wrapper")),n=t.allowMultipleAds,r=t.fallbackOnNoAd,i=t.followAdditionalWrappers,o={};return n&&(o.allowMultipleAds=Z(n)),r&&(o.fallbackOnNoAd=Z(r)),i&&(o.followAdditionalWrappers=Z(i)),o},de=function(e){var t=e&&S(e);if(t){var n=I(t,"Error");if(n)return O(n)}return null},fe=function(e){var t=e&&S(e),n=t&&P(t,"Impression");return n&&n.length>0?n.map(function(e){return O(e)}):null},he=function(e){var t=e&&S(e),n=t&&I(t,"ViewableImpression"),r=n&&P(n,"Viewable");return r&&r.length>0?r.map(function(e){return O(e)}):null},pe=function(e){var t=e&&S(e),n=t&&I(t,"ViewableImpression"),r=n&&P(n,"NotViewable");return r&&r.length>0?r.map(function(e){return O(e)}):null},ve=function(e){var t=e&&S(e),n=t&&I(t,"ViewableImpression"),r=n&&P(n,"ViewUndetermined");return r&&r.length>0?r.map(function(e){return O(e)}):null},me=function(e){var t=e&&B(e);if(t){var n=I(t,"UniversalAdId"),r=n&&O(n)||null,i=I(t,"Linear"),o=I(i,"MediaFiles"),a=o&&P(o,"MediaFile");if(a&&a.length>0)return a.map(function(e){var t=O(e),n=_(e),i=n.apiFramework,o=n.bitrate,a=n.codec,u=n.delivery,c=n.height,s=n.id,l=n.maintainAspectRatio,d=n.maxBitrate,f=n.minBitrate,h=n.scalable,p=n.type,v=n.width;return{apiFramework:i,bitrate:o,codec:a,delivery:u,height:c,id:s,maintainAspectRatio:l,maxBitrate:d,minBitrate:f,scalable:h,src:t,type:p,universalAdId:r,width:v}})}return null},ye=function(e){var t=e&&B(e);if(t){var n=I(t,"Linear"),r=I(n,"MediaFiles"),i=r&&P(r,"InteractiveCreativeFile");if(i&&i.length>0)return i.map(function(e){var t=_(e),n=t.apiFramework,r=t.type;return{apiFramework:n,src:O(e),type:r}})}return null},we=function(e){var t=ye(e);if(t)return t;var n=me(e);return n&&(t=n.filter(function(e){var t=e.apiFramework;return"vpaid"===(void 0===t?"":t).toLowerCase()}).map(function(e){return{apiFramework:e.apiFramework,src:e.src,type:e.type}})).length>0?t:null},ge=function(e){var t=e&&B(e),n=t&&I(t,"Linear"),r=n&&I(n,"VideoClicks");return r||null},be=function(e){var t=ge(e),n=t&&I(t,"ClickThrough");return n?O(n):null},Ee=function(e){var t=ge(e),n=t&&P(t,"ClickTracking");return n&&n.length>0?n.map(function(e){return O(e)}):null},xe=function(e){var t=ge(e),n=t&&P(t,"CustomClick");return n&&n.length>0?n.map(function(e){return O(e)}):null},ke=function(e){var t=e&&B(e),n=t&&I(t,"Linear"),r=n&&U(n,"skipoffset");return r?R(r):null},Ae=function(e){var t=function(e){var t=/<Linear([\s\S]*)<\/Linear/gm.exec(e);return t&&t[1]}(e);return{AdParameters:t&&function(e){var t=/<AdParameters[\s\w="]*>([\s\S]*)<\/AdParameters>/gm.exec(e);return t&&t[1].replace(/[\n\s]*<!\[CDATA\[[\n\s]*/,"").replace(/[\n\s]*\]\]>[\n\s]*$/,"").replace(/\]\]\]\]><!\[CDATA\[>/,"]]>").trim()}(t),xmlEncoded:t&&function(e){var t=/<AdParameters[\s]*xmlEncoded="(.*?)">/gim.exec(e);return Boolean(t)&&"true"===t[1]}(t)}},Ce=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e,o=(t=r,n={},Object.keys(t).forEach(function(e){n[e.toUpperCase()]=t[e]}),n);return Boolean(o.CACHEBUSTING)||(o.CACHEBUSTING=Math.round(1e10*Math.random())),Boolean(o.TIMESTAMP)||(o.TIMESTAMP=(new Date).toISOString()),Object.keys(o).forEach(function(e){var t=encodeURIComponent(o[e]);i=i.replace(new RegExp("\\["+e+"\\]","gm"),t)}),i},Te=function(e,t){var n=new Image;return n.src=Ce(e,t),n},Le=function(e,t){var n=t.errorCode,r=t.tracker,i=void 0===r?Te:r;e.forEach(function(e){var t=e.ad,r=e.parsedXML,o=de(t)||ne(r);Boolean(o)&&i(o,{errorCode:n})})},Ie=function(e){return function(t,n){var r=n.data,i=n.tracker,o=void 0===i?Te:i;t.forEach(function(t){var n=t.ad,i=e(n);if(Boolean(i))switch(!0){case"string"==typeof i:o(i,r);break;case Array.isArray(i):i.map(function(e){var t=e.uri;return t&&o(t,r)})}})}},Pe=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=[];return t.length>0&&t.forEach(function(t){var r=t(e);Array.isArray(r)&&r.length>0&&n.push.apply(n,$(r.map(function(e){return{uri:e}})))}),n}},Se=function(e){return function(t){return N(t,e)}},Oe=(H(d={},"clickThrough",Ie(Pe(Ee,xe))),H(d,"closeLinear",Ie(Se("closeLinear"))),H(d,"complete",Ie(Se("complete"))),H(d,"creativeView",Ie(Se("creativeView"))),H(d,"error",Le),H(d,"exitFullscreen",Ie(Se("exitFullscreen"))),H(d,"firstQuartile",Ie(Se("firstQuartile"))),H(d,"fullscreen",Ie(Se("fullscreen"))),H(d,"iconClick",function(e,t){var n=t.data,r=t.tracker,i=void 0===r?Te:r,o=n.iconClickTracking;if(Array.isArray(o)){var a=!0,u=!1,c=void 0;try{for(var s,l=o[Symbol.iterator]();!(a=(s=l.next()).done);a=!0)i(s.value,q({},n))}catch(e){u=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(u)throw c}}}}),H(d,"iconView",function(e,t){var n=t.data,r=t.tracker,i=void 0===r?Te:r,o=n.iconViewTracking;if(Array.isArray(o)){var a=!0,u=!1,c=void 0;try{for(var s,l=o[Symbol.iterator]();!(a=(s=l.next()).done);a=!0)i(s.value,q({},n))}catch(e){u=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(u)throw c}}}}),H(d,"impression",Ie(Pe(fe))),H(d,"midpoint",Ie(Se("midpoint"))),H(d,"mute",Ie(Se("mute"))),H(d,"notViewable",Ie(Pe(pe))),H(d,"pause",Ie(Se("pause"))),H(d,"playerCollapse",Ie(Se("playerCollapse"))),H(d,"playerExpand",Ie(Se("playerExpand"))),H(d,"progress",function(e,t){var n=t.data,r=t.tracker,i=void 0===r?Te:r,o=n.progressUri;Boolean(o)&&i(o,q({},n))}),H(d,"resume",Ie(Se("resume"))),H(d,"rewind",Ie(Se("rewind"))),H(d,"skip",Ie(Se("skip"))),H(d,"start",Ie(Se("start"))),H(d,"thirdQuartile",Ie(Se("thirdQuartile"))),H(d,"unmute",Ie(Se("unmute"))),H(d,"viewable",Ie(Pe(he))),H(d,"viewUndetermined",Ie(Pe(ve))),d),_e=function(e){return function(t){return M(t,e)}},Ue=(H(f={},y,Ie(_e(y))),H(f,w,Ie(_e(w))),H(f,"close",Ie(_e("close"))),f),Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.async,r=void 0!==n&&n,i=t.defer,o=void 0!==i&&i,a=t.type,u=void 0===a?"text/javascript":a,c=t.placeholder;if(!e)throw new TypeError('Missing required "src" parameter');return new Promise(function(t,n){var i=document.createElement("script"),a=c;i.type=u,i.async=r,i.defer=o,i.onerror=function(){return n(new URIError("The script "+e+" is not accessible."))},i.onload=function(){return t(i)},a||(a=document.currentScript?document.currentScript.parentNode:document.head),i.src=e,a.appendChild(i)})},je=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).createElement("VIDEO");return e.style.width="100%",e.style.height="100%",e},Ve=function(){var e=document.createElement("DIV");return e.classList.add("mol-video-ad-container"),e.style.width="100%",e.style.height="100%",e},Re=function(e){return e.contentDocument||e.contentWindow&&e.contentWindow.document},Be="srcdoc"in document.createElement("iframe"),Ne=function(){var e=document.createElement("IFRAME");return e.sandbox="allow-forms allow-popups allow-scripts allow-same-origin",e.loading="eager",e.style.margin="0",e.style.padding="0",e.style.border="none",e.style.width="0",e.style.height="0",e.style.position="absolute",e},Me=function(e,t){return new Promise(function(n,r){var i,o=function(e,t){return"<!DOCTYPE html>\n<html>\n  <head><meta charset='UTF-8'></head>\n  <body style='margin:0;padding:0'>\n  <script type='text/javascript'>window.parent.postMessage('"+e+"_ready', '"+t+"');<\/script>\n  </body>\n</html>"}(t,(i=window.location).origin?i.origin:i.protocol+"//"+i.hostname+(i.port?":"+i.port:"")),a=void 0;try{(a=Ne()).src="about:blank",e.appendChild(a),Re(a).write(o)}catch(t){e.removeChild(a),Be?((a=Ne()).src="about:srcdoc",a.srcdoc=o,e.appendChild(a)):r(t)}window.addEventListener("message",function e(r){r.data===t+"_ready"&&(window.removeEventListener("message",e),n(a))},!1)})},De=(h="videoAdContainer",p=-1,function(){return h+"_"+ ++p}),ze=Symbol("hidden"),We=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(z(this,e),this[ze]={destroyed:!1,iframe:null,readyPromise:null},!(t instanceof Element))throw new TypeError("placeholder is not an Element");this[ze].id=De(),this.element=Ve(),this.executionContext=null,this.isOriginalVideoElement=Boolean(n),n?this.videoElement=n:(this.videoElement=je(),this.element.appendChild(this.videoElement)),t.appendChild(this.element)}return W(e,[{key:"addScript",value:function(){var e=D(v.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDestroyed()){e.next=2;break}throw new Error("VideoAdContainer has been destroyed");case 2:if(this[ze].iframe){e.next=7;break}return e.next=5,Me(this.element,this[ze].id);case 5:this[ze].iframe=e.sent,this.executionContext=this[ze].iframe.contentWindow;case 7:return n=Re(this[ze].iframe).body,e.abrupt("return",Fe(t,q({placeholder:n},r)));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=this,t=new Promise(function(t){setTimeout(function(){e.element.parentNode.removeChild(e.element),t()},1e3)});return this.element.style.zIndex=-9999,this[ze].destroyed=!0,t}},{key:"isDestroyed",value:function(){return this[ze].destroyed}}]),e}(),He=function(e,t){if(!e)throw new TypeError("placeholder is required");return new We(e,t)},qe=function(e,t){var n=t.src,r=t.type;return e.canPlayType(r||function(e){var t=e.match(/\.([^.\/?]+)(\?[^\/]+)?$/i),n=t&&t[1];return{"3gp":"video/3gpp",avi:"video/x-msvideo",flv:"video/x-flv",m3u8:"application/x-mpegURL",m4v:"video/mp4",mov:"video/quicktime",mp4:"video/mp4",mpd:"application/dash+xml",ogv:"video/ogg",ts:"video/MP2T",webm:"video/webm",wmv:"video/x-ms-wmv"}[n]||"video/"+n}(n))},Qe=function(e,t,n){var r=n.getBoundingClientRect(),i=me(e);return i?function(e,t){var n=t.width;return e.slice(0).sort(function(e,t){return Math.abs(n-(e.width||0))-Math.abs(n-(t.width||0))})}(i.filter(function(e){return qe(t,e)}),r)[0]:null},Ge=function(e,t,n){var r=function r(){return e.removeEventListener(t,r),n.apply(void 0,arguments)};return e.addEventListener(t,r),function(){e.removeEventListener(t,r)}},Xe=m.progress,$e=function(e,t){return function(){try{e.apply(void 0,arguments)}catch(e){t&&t.error(e)}}},Ke=m.fullscreen,Ye=m.exitFullscreen,Je=m.playerCollapse,Ze=m.playerExpand,et=m.pause,tt=m.resume,nt=m.rewind,rt=m.skip,it=function(){var e=document.createElement("BUTTON");return e.classList.add("mol-vast-skip-control"),e.type="button",e.innerHTML="skip",e.style.position="absolute",e.style.bottom="15px",e.style.right="15px",e},ot=m.error,at="volumeChanged",ut="finish",ct="adProgress",st=m.complete,lt=m.firstQuartile,dt=m.midpoint,ft=m.start,ht=m.thirdQuartile,pt=function(e,t){return 100*e/t},vt=function(e,t){return pt(e,t)>=99},mt=m.mute,yt=m.unmute,wt=function(e){return e.muted||0===e.volume},gt=m.impression,bt=m.creativeView,Et=function(e,t){for(var n=String(e);n.length<t;)n="0"+n;return n},xt=m.progress,kt=function(e){return 1e3*e},At=function(e){var t=e.offset,n=e.uri,r="number"==typeof t||function(e){return/^\d+(\.\d+)?%$/g.test(e)&&!isNaN(parseFloat(e))}(t),i="string"==typeof n&&n.length>0;return r&&i},Ct=function(e,t){return"number"==typeof e?e:parseFloat(e)/100*t},Tt=m.clickThrough,Lt=[function(e,t){var n=e.videoElement,r=e.element,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).clickThroughUrl,o=r||n.parentNode,a=document.createElement("A");return a.classList.add("mol-vast-clickthrough"),a.style.width="100%",a.style.height="100%",a.style.position="absolute",a.style.left=0,a.style.top=0,i&&(a.href=i,a.target="_blank"),a.onclick=function(e){void 0!==Event.prototype.stopPropagation&&e.stopPropagation(),n.paused?(void 0!==Event.prototype.preventDefault&&e.preventDefault(),n.play()):(n.pause(),t(Tt))},o.appendChild(a),function(){return o.removeChild(a)}},function(e,t){var n=e.videoElement,r=function(){t(ot,n.error)};return n.addEventListener("error",r),function(){n.removeEventListener("error",r)}},function(e,t){var n=e.videoElement,r=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"],i=!1,o=function(){(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null)===n?(i=!0,t(Ze),t(Ke)):i&&(i=!1,t(Je),t(Ye))},a=!0,u=!1,c=void 0;try{for(var s,l=r[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var d=s.value;document.addEventListener(d,o)}}catch(e){u=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(u)throw c}}return function(){var e=!0,t=!1,n=void 0;try{for(var i,a=r[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var u=i.value;document.removeEventListener(u,o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},function(e,t){var n=e.videoElement,r=!1,i=function e(){var i=n.currentTime;!r&&i>0&&(r=!0,t(gt),t(bt),n.removeEventListener("timeupdate",e))};return n.addEventListener("timeupdate",i),function(){n.removeEventListener("timeupdate",i)}},function(e,t){var n=e.videoElement,r=!1,i=!0,o=function(){r?i&&(i=!1,t(tt)):(r=!0,i=!1)},a=function(){i||(i=!0,t(et))};return n.addEventListener("play",o),n.addEventListener("pause",a),function(){n.removeEventListener("play",o),n.removeEventListener("pause",a)}},function(e,t){var n=e.videoElement,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).progressEvents,i=void 0===r?[]:r,o=n.duration,a=kt(o),u=0,c=kt(n.currentTime),s=i.filter(At).map(function(e){var t=e.offset,n=e.uri;return{offset:Ct(t,a),uri:n}}),l=function e(){var r=n.currentTime,i=Math.abs(r-c);u+=kt(i),c=r;var o=s.reduce(function(e,t){var n=t.offset;return u>=n?e.toCall.push(t):e.stillPending.push(t),e},{stillPending:[],toCall:[]}),a=o.stillPending,l=o.toCall;s=a,l.forEach(function(e){var n,r,i,o,a,c=e.uri;t(xt,{contentplayhead:(n=u,r=Math.floor(n/36e5),i=Math.floor(n/6e4%60),o=Math.floor(n/1e3%60),a=n%1e3,Et(r,2)+":"+Et(i,2)+":"+Et(o,2)+"."+Et(a,3)),progressUri:c})}),0===s.length&&n.removeEventListener("timeupdate",e)};return s.length>0&&n.addEventListener("timeupdate",l),function(){n.removeEventListener("timeupdate",l)}},function(e,t){var n=e.videoElement,r=n.currentTime,i=function(){var e=n.currentTime-r;e<0&&Math.abs(e)>=1&&t(nt),r=n.currentTime};return n.addEventListener("timeupdate",i),function(){n.removeEventListener("timeupdate",i)}},function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipoffset,i=n.createSkipControl,o=void 0===i?it:i;if(!Boolean(r))return function(){};var a=void 0,u=e.videoElement,c=e.element,s=function e(){var n=1e3*u.currentTime;!Boolean(a)&&n>=r&&((a=o()).onclick=function(e){return void 0!==Event.prototype.stopPropagation&&e.stopPropagation(),t(rt),!1},c.appendChild(a),u.removeEventListener("timeupdate",e))};return u.addEventListener("timeupdate",s),function(){u.removeEventListener("timeupdate",s),Boolean(a)&&c.removeChild(a)}},function(e,t){var n=e.videoElement,r=!1,i=!1,o=!1,a=!1,u=!1,c=function(){var e=n.duration,c=n.currentTime;!r&&c>0?(r=!0,t(ft)):i?o?a?u||vt(c,e)&&(u=!0,t(st)):function(e,t){return pt(e,t)>=75}(c,e)&&(a=!0,t(ht)):function(e,t){return pt(e,t)>=50}(c,e)&&(o=!0,t(dt)):function(e,t){return pt(e,t)>=25}(c,e)&&(i=!0,t(lt)),t(ct)},s=function e(){var r=n.duration,i=n.currentTime;!u&&vt(i,r)&&(u=!0,t(st)),n.removeEventListener("ended",e),n.removeEventListener("timeupdate",c)};return n.addEventListener("timeupdate",c),n.addEventListener("ended",s),function(){n.removeEventListener("timeupdate",c),n.removeEventListener("ended",s)}},function(e,t){var n=e.videoElement,r=wt(n),i=function(){t(at),r&&!wt(n)?t(yt):!r&&wt(n)&&t(mt),r=wt(n)};return n.addEventListener("volumechange",i),function(){n.removeEventListener("volumechange",i)}}],It=function(e,t){var n=e.vastChain,r=e.videoAdContainer,i=e.hooks,o=n[0].ad,a=ke(o),u=be(o),c=function(e){return e.map(function(e){return e.ad}).reduce(function(e,t){var n=N(t,Xe)||[];return[].concat($(e),$(n))},[]).map(function(e){return{offset:e.offset,uri:e.uri}})}(n),s=q({clickThroughUrl:u,progressEvents:c,skipoffset:a},i),l=Lt.map(function(e){return $e(e(r,t,s))});return function(){return l.forEach(function(e){return e()})}},Pt=function(e,t){return new Promise(function(n){var r={currentTime:e.currentTime,playing:!e.paused};r.playing&&e.pause(),e.src=t.src,e.load(),Ge(e,"loadeddata",function(){e.currentTime=r.currentTime,r.playing&&e.play(),n()})})},St="Expected a function",Ot=NaN,_t="[object Symbol]",Ut=/^\s+|\s+$/g,Ft=/^[-+]0x[0-9a-f]+$/i,jt=/^0b[01]+$/i,Vt=/^0o[0-7]+$/i,Rt=parseInt,Bt="object"==(void 0===i?"undefined":r(i))&&i&&i.Object===Object&&i,Nt="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,Mt=Bt||Nt||Function("return this")(),Dt=Object.prototype.toString,zt=Math.max,Wt=Math.min,Ht=function(){return Mt.Date.now()};function qt(e){var t=void 0===e?"undefined":r(e);return!!e&&("object"==t||"function"==t)}function Qt(e){return"symbol"==(void 0===e?"undefined":r(e))||function(e){return!!e&&"object"==(void 0===e?"undefined":r(e))}(e)&&Dt.call(e)==_t}function Gt(e){if("number"==typeof e)return e;if(Qt(e))return Ot;if(qt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ut,"");var n=jt.test(e);return n||Vt.test(e)?Rt(e.slice(2),n?2:8):Ft.test(e)?Ot:+e}var Xt=function(e,t,n){var r,i,o,a,u,c,s=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(St);function h(t){var n=r,o=i;return r=i=void 0,s=t,a=e.apply(o,n)}function p(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-s>=o}function v(){var e=Ht();if(p(e))return m(e);u=setTimeout(v,function(e){var n=t-(e-c);return d?Wt(n,o-(e-s)):n}(e))}function m(e){return u=void 0,f&&r?h(e):(r=i=void 0,a)}function y(){var e=Ht(),n=p(e);if(r=arguments,i=this,c=e,n){if(void 0===u)return function(e){return s=e,u=setTimeout(v,t),l?h(e):a}(c);if(d)return u=setTimeout(v,t),h(c)}return void 0===u&&(u=setTimeout(v,t)),a}return t=Gt(t)||0,qt(n)&&(l=!!n.leading,o=(d="maxWait"in n)?zt(Gt(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==u&&clearTimeout(u),s=0,r=c=i=u=void 0},y.flush=function(){return void 0===u?a:m(Ht())},y},$t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,Kt=function(){},Yt=["style","clientWidth","clientHeight"],Jt=Symbol("mutationHandlers"),Zt=Symbol("mutationObserver"),en=function(e,t){if(!e[Jt]){e[Jt]=[];e[Zt]=function(e,t){var n=new $t(function(e){for(var n=0;n<e.length;n++){var r=e[n].attributeName;Yt.includes(r)&&t()}});return n.observe(e,{attributes:!0,characterData:!1,childList:!0}),n}(e,function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e[Jt]&&e[Jt].forEach(function(e){return e.apply(void 0,n)})})}return e[Jt].push(t),function(){e[Jt]=e[Jt].filter(function(e){return e!==t}),0===e[Jt].length&&(e[Zt].disconnect(),delete e[Jt],delete e[Zt])}},tn=Symbol("resizeHandlers"),nn=Symbol("resizeElement"),rn=function(e,t){if(!e[tn]){e[tn]=[];e[nn]=function(e){var t=document.createElement("iframe");return t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; border: 0; overflow: hidden; pointer-events: none; z-index: -1;"),t.onload=function(){this.contentWindow&&this.contentWindow.addEventListener("resize",e)},t.type="text/html",t.src="about:blank",t.loading="eager",t}(function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e[tn]&&e[tn].forEach(function(e){return e.apply(void 0,n)})}),"static"===getComputedStyle(e).position&&(e.style.position="relative"),e.appendChild(e[nn])}return e[tn].push(t),function(){e[tn]=e[tn].filter(function(e){return e!==t}),0===e[tn].length&&(e.removeChild(e[nn]),delete e[tn],delete e[nn])}},on=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).threshold,r=void 0===n?20:n;!function(e,t){if(!(e instanceof Element))throw new TypeError("Target is not an Element node");if(!(t instanceof Function))throw new TypeError("Callback is not a function")}(e,t);var i=function(e){var t=e.style,n=e.clientHeight,r=e.clientWidth;return[t.width,t.height,r,n].join(".")},o=i(e),a=Xt(function(){var n=i(e);n!==o&&(o=n,t())},r),u=Boolean($t)?en(e,a):Kt,c=rn(e,a);return function(){u(),c()}},an=window.IntersectionObserver,un=function(){},cn=Symbol("intersectionHandlers"),sn=Symbol("intersectionObserver"),ln=[],dn=[],fn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.threshold,i=void 0===r?100:r,o=n.viewabilityOffset,a=void 0===o?.4:o;if(function(e,t){if(!(e instanceof Element))throw new TypeError("Target is not an Element node");if(!(t instanceof Function))throw new TypeError("Callback is not a function")}(e,t),!Boolean(an))return t(void 0),un;var u=!1,c=Xt(function(n){n.forEach(function(n){if(n.target===e){var r=!document.hidden&&n.intersectionRatio>a;r!==u&&(u=r,t(r))}}),dn=n},i),s=function(e,t){if(!e[cn]){e[cn]=[];var n={root:null,rootMargin:"0px",threshold:[].concat($(new Array(11))).map(function(e,t){return t/10})};e[sn]=new an(function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e[cn]&&e[cn].forEach(function(e){return e.apply(void 0,n)})},n),e[sn].observe(e)}return e[cn].push(t),function(){e[cn]=e[cn].filter(function(e){return e!==t}),0===e[cn].length&&(e[sn].disconnect(),delete e[cn],delete e[sn])}}(e,c),l=function(e,t){var n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];ln&&ln.forEach(function(e){return e.apply(void 0,t)})};return ln.push(t),1===ln.length&&document.addEventListener("visibilitychange",n),function(){0===(ln=ln.filter(function(e){return e!==t})).length&&document.removeEventListener("visibilitychange",n)}}(0,function(){return c(dn)});return function(){s(),l()}},hn=function(e){var t=0,n=0,r=function(){e.duration-t>3&&(e.pause(),e.play(),e.currentTime=t)},i=function(){var r=e.currentTime;Math.abs(r-t)>3?((n+=1)>=2&&e.pause(),e.currentTime=t):t=r};return e.addEventListener("timeupdate",i),e.addEventListener("ended",r),function(){e.removeEventListener("timeupdate",i),e.removeEventListener("ended",r)}},pn=function(){function e(t){z(this,e),this.evts={},this.logger=t||console}return W(e,[{key:"on",value:function(e,t){var n=this.evts;return(n[e]||(n[e]=[])).push(t),this}},{key:"removeListener",value:function(e,t){var n=this.evts,r=n[e]||(n[e]=[]);return n[e]=r.filter(function(e){return e!==t&&e._!==t}),this}},{key:"removeAllListeners",value:function(e){return e?this.evts[e]=null:this.evts={},this}},{key:"once",value:function(e,t){var n=this,r=function r(){n.removeListener(e,r),t.apply(void 0,arguments)};return r._=t,this.on(e,r)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=this.evts,a=o[e]||(o[e]=[]),u=a.length>0;return a.forEach(function(e){try{e.apply(void 0,r)}catch(e){t.logger.error(e,e.stack)}}),u}}]),e}(),vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.staticResource,n=e.htmlResource,r=e.iFrameResource;return t||n||r},mn=function(e){return 1===e.length?e[0]:function(e){var t=window.devicePixelRatio||0;return e.slice(0).sort(function(e,n){return Math.abs(t-(e.pxratio||0))-Math.abs(t-(n.pxratio||0))})}(e)[0]},yn=function(e){var t=e.map(function(e){return e.ad}).reduce(function(e,t){return[].concat($(e),$(J(t)||[]))},[]);return t.length>0?function(e){var t=function(e){return e.reduce(function(e,t){var n=t.program,r=void 0===n?"UNKNOWN":n;return e[r]||(e[r]=[]),e[r].push(t),e},{})}(e);return Object.keys(t).reduce(function(e,n){return[].concat($(e),"UNKNOWN"===n?$(t.UNKNOWN):[mn(t[n])])},[])}(function(e){return t=vn,n={},e.filter(function(e){var r=t(e);return!n.hasOwnProperty(r)&&(n[r]=!0,!0)});var t,n}(t)):null},wn=function e(){var t=this;z(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},gn=function(e,t){var n=!0,r=new wn,i=r.promise,o=r.reject,a=r.resolve,u=Ge(e,t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n=!1,a(t)});return{cancel:function(){n&&(n=!1,u(),o(new Error("waitFor was canceled")))},promise:i}};!function(e){if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(e){return e&&DataView.prototype.isPrototypeOf(e)},i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};l.prototype.append=function(e,t){e=u(e),t=c(t);var n=this.map[e];this.map[e]=n?n+","+t:t},l.prototype.delete=function(e){delete this.map[u(e)]},l.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},l.prototype.set=function(e,t){this.map[u(e)]=c(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),s(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),s(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),s(e)},t.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},v.call(m.prototype),v.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var a=[301,302,303,307,308];w.redirect=function(e,t){if(-1===a.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},e.Headers=l,e.Request=m,e.Response=w,e.fetch=function(e,n){return new Promise(function(r,i){var o=new m(e,n),a=new XMLHttpRequest;a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new l,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new w(i,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function s(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function h(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&r(e))this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!i(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e,t,n,r=d(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=f(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(e,t){var n,r,i=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),o.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function y(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:void 0);var bn,En,xn,kn,An=function(e){var t=e.toLowerCase();return["text/plain","text/html"].some(function(e){return t.includes(e)})},Cn=(bn=D(v.mark(function e(t){var n,r,i,o;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(n=e.sent,r=n.headers.get("Content-Type"),!(n.status>=400)){e.next=8;break}throw(i=new Error(n.statusText)).response=n,i;case 8:if(An(r)){e.next=12;break}throw(o=new Error("fetchHtml error, invalid Content-Type "+r)).response=n,o;case 12:return e.abrupt("return",n.text());case 13:case"end":return e.stop()}},e,void 0)})),function(e){return bn.apply(this,arguments)}),Tn=function(e,t){var n=t.staticResource,r=t.htmlResource,i=t.iFrameResource;return Boolean(n)?function(e,t){var n=t.document,r=t.data,i=r.height,o=r.width,a=n.createElement("IMG");return o&&(a.width=o),i&&(a.height=i),a.src=e,a}(n,{data:t,document:e}):Boolean(r)?function(e,t){var n=t.document,r=t.data,i=r.height,o=r.width,a=n.createElement("DIV");return o&&(a.style.width=o+"px"),i&&(a.style.height=i+"px"),Cn(e).then(function(e){a.innerHTML=e,a.dispatchEvent(new CustomEvent("load"))}).catch(function(){a.dispatchEvent(new CustomEvent("error"))}),a}(r,{data:t,document:e}):function(e,t){var n=t.document,r=t.data,i=r.height,o=r.width,a=n.createElement("IFRAME");return a.src=e,a.sandbox="allow-forms allow-popups allow-scripts",a.loading="eager",o&&(a.width=o),i&&(a.height=i),a.src=e,a.frameBorder=0,a.style.border="none",a}(i,{data:t,document:e})},Ln=function(){},In=function(e,t){var n=t.document,r=t.placeholder;return new Promise(function(t,i){try{var o=Tn(n,e),a=gn(o,"error"),u=gn(o,"load"),c=function(){r.contains(o)&&(r.removeChild(o),o.style.zIndex=0)};a.promise.then(function(){u.cancel(),c(),i(new Error("Error loading resource"))}).catch(Ln),u.promise.then(function(){a.cancel(),c(),t(o)}).catch(Ln),o.style.zIndex=-9999,r.appendChild(o)}catch(e){i(e)}})},Pn=function(e,t,n){var r,i,o,a=n.drawnIcons,u=n.placeholder,c=e.signature,s=t.getBoundingClientRect(),l=u.getBoundingClientRect(),d=e.width||s.width,f=e.height||s.height,h=e.xPosition||"right",p=e.yPosition||"top",v=void 0,m=void 0;if(function(e){return!["left","right"].includes(String(e).toLowerCase())}(h))v=h;else{var y=a.filter(function(e){return e.xPosition===h&&e.yPosition===p});v=function(e,t,n,r){var i=n.reduce(function(e,t){return e+t.width+1},0);return"left"===e?i:r-i-t}(h,d,y,l.width)}!function(e){return!["top","bottom"].includes(String(e).toLowerCase())}(p)?(r=p,i=f,o=l.height,m="top"===r?0:o-i):m=p;var w=v+"-"+m+"_"+d+"x"+f;return Object.assign(e,{height:f,left:v,signature:w,top:m,updated:c!==w,width:d})},Sn=function(e){return e.height*e.width},On=function(e){return e.left+e.width},_n=function(e){var t=e.left;return t},Un=function(e){var t=e.top;return t},Fn=function(e){return e.top+e.height},jn=function(e,t){return!t.drawnIcons.some(function(t){return function(e,t){return!(_n(e)>On(t)||On(e)<_n(t)||Fn(e)<Un(t)||Un(e)>Fn(t))}(e,t)})},Vn=function(e,t){var n=function(e,t){var n=t.drawnIcons,r=t.placeholder,i=Sn(r.getBoundingClientRect());return Sn(e)+n.reduce(function(e,t){return e+Sn(t)},0)<=.35*i}(e,t),r=function(e,t){var n=t.placeholder.getBoundingClientRect();return e.left>=0&&e.left+e.width<=n.width&&e.top>=0&&e.top+e.height<=n.height}(e,t),i=jn(e,t);return n&&r&&i},Rn=function(){},Bn=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).onIconClick,r=void 0===n?Rn:n,i=document.createElement("A");return t.iconClickthrough&&(i.href=t.iconClickthrough,i.target="_blank"),Boolean(t.iFrameResource)&&(e.style.pointerEvents="none"),i.onclick=function(e){void 0!==Event.prototype.stopPropagation&&e.stopPropagation(),r(t)},i.appendChild(e),i},Nn=(En=D(v.mark(function e(t,n){var r;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.element){e.next=9;break}return e.next=3,In(t,n);case 3:(r=e.sent).width="100%",r.height="100%",r.style.height="100%",r.style.width="100%",t.element=Bn(r,t,n);case 9:return e.abrupt("return",t.element);case 10:case"end":return e.stop()}},e,void 0)})),function(e,t){return En.apply(this,arguments)}),Mn=function(e,t){var n=t.height,r=t.width,i=t.left,o=t.top,a=t.yPosition;return e.height=n,e.width=r,e.style.position="absolute",e.style.left=i+"px","bottom"===a?e.style.bottom="0":e.style.top=o+"px",e.style.height=n+"px",e.style.width=r+"px",e},Dn=(xn=D(v.mark(function e(t,n){var r,i,o;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.placeholder,e.next=3,Nn(t,n);case 3:if(i=e.sent,o=Pn(t,i,n),!Vn(o,n)){e.next=9;break}i.parentNode&&!t.updated||r.appendChild(Mn(i,o)),e.next=11;break;case 9:throw i.parentNode&&i.parentNode.removeChild(i),new Error("Icon can't be rendered");case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}},e,void 0)})),function(e,t){return xn.apply(this,arguments)}),zn=function(e,t){var n=t.onIconClick,r=t.videoAdContainer,i=t.logger,o=r.element,a=r.videoElement,u=[],c=e.reduce(function(e,t){return!function(e,t){var n=1e3*t.currentTime,r=1e3*t.duration,i=e.offset||0,o=e.duration||r;return i<=n&&n-i<=o}(t,a)?e.otherIcons.push(t):e.iconsToShow.push(t),e},{iconsToShow:[],otherIcons:[]}),s=c.iconsToShow;return c.otherIcons.forEach(function(e){var t=e.element;t&&t.parentNode&&t.parentNode.removeChild(t)}),s.reduce(function(e,t){return e.then(function(){return Dn(t,{document:document,drawnIcons:u,onIconClick:n,placeholder:o})}).then(function(e){return u.push(e)}).catch(function(e){return i.log(e)})},Promise.resolve(u)).then(function(){return u})},Wn=Symbol("firstRenderPending"),Hn=function(){},qn=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.videoAdContainer,i=n.onIconView,o=void 0===i?Hn:i,a=n.onIconClick,u=void 0===a?Hn:a,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["videoAdContainer","onIconView","onIconClick"]),s=r.videoElement,l=r.element,d=(t=D(v.mark(function t(){var n;return v.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zn(e,q({onIconClick:u,videoAdContainer:r},c));case 2:n=t.sent,l.dispatchEvent(new CustomEvent("iconsDrawn")),n.forEach(function(e){e[Wn]&&(o(e),e[Wn]=!1)});case 5:case"end":return t.stop()}},t,void 0)})),function(){return t.apply(this,arguments)});return e.forEach(function(e){e[Wn]=!0}),{drawIcons:d,hasPendingIconRedraws:function(){return function(e,t){var n=1e3*t.currentTime,r=1e3*t.duration,i=e.filter(function(e){return!e.offset||e.offset<n}),o=e.filter(function(e){return e.duration&&e.duration<r});return i.length>0||o.length>0}(e,s)},removeIcons:function(){return function(e){return e.filter(function(e){var t=e.element;return Boolean(t)&&Boolean(t.parentNode)}).forEach(function(e){var t=e.element;return t.parentNode.removeChild(t)})}(e)}}},Qn=function(e,t){var n=window.screen;return e+100>n.width&&t+100>n.height?"fullscreen":e<400?"thumbnail":"normal"},Gn=m.start,Xn=m.viewable,$n=m.viewUndetermined,Kn=m.iconClick,Yn=m.iconView,Jn=Symbol("_protected"),Zn=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.viewability,o=void 0!==i&&i,a=r.responsive,u=void 0!==a&&a,c=r.logger,s=void 0===c?console:c;z(this,t);var l=X(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s));l[Jn]={finish:function(){l[Jn].finished=!0,l[Jn].onFinishCallbacks.forEach(function(e){return e()}),l.emit(ut,{adUnit:l,type:ut})},finished:!1,onErrorCallbacks:[],onFinishCallbacks:[],started:!1,throwIfCalled:function(){throw new Error("VideoAdUnit method must be implemented on child class")},throwIfFinished:function(){if(l.isFinished())throw new Error("VideoAdUnit is finished")},viewable:!1},l.type=null,l.error=null,l.errorCode=null;var d=l[Jn].onFinishCallbacks;if(l.vastChain=e,l.videoAdContainer=n,l.icons=yn(e),d.push(hn(l.videoAdContainer.videoElement)),l.icons){var f=qn(l.icons,{logger:s,onIconClick:function(e){return l.emit(Kn,{adUnit:l,data:e,type:Kn})},onIconView:function(e){return l.emit(Yn,{adUnit:l,data:e,type:Yn})},videoAdContainer:n}),h=f.drawIcons,p=f.hasPendingIconRedraws,v=f.removeIcons;l[Jn].drawIcons=h,l[Jn].removeIcons=v,l[Jn].hasPendingIconRedraws=p,d.push(v)}return e.some(function(e){var t=e.ad;return he(t)})&&l.once(Gn,function(){var e=fn(l.videoAdContainer.element,function(e){if(!l.isFinished()&&!1!==e&&!l[Jn].viewable){var t=e?Xn:$n;l.emit(t,{adUnit:l,type:t}),l[Jn].viewable=t}},{viewabilityOffset:.5});d.push(e)}),o&&l.once(Gn,function(){var e=fn(l.videoAdContainer.element,function(e){l.isFinished()||"boolean"==typeof e&&(e?l.resume():l.pause())});d.push(e)}),u&&l.once(Gn,function(){var e=l.videoAdContainer.element;l[Jn].size={height:e.clientHeight,viewmode:Qn(e.clientWidth,e.clientHeight),width:e.clientWidth};var t=on(e,function(){if(!l.isFinished()){var t=l[Jn].size,n=e.clientHeight,r=e.clientWidth;n===t.height&&r===t.width||l.resize(r,n,Qn(r,n))}});d.push(t)}),l}return G(t,pn),W(t,[{key:"start",value:function(){this[Jn].throwIfCalled()}},{key:"resume",value:function(){this[Jn].throwIfCalled()}},{key:"pause",value:function(){this[Jn].throwIfCalled()}},{key:"setVolume",value:function(e){this[Jn].throwIfCalled()}},{key:"getVolume",value:function(){this[Jn].throwIfCalled()}},{key:"cancel",value:function(){this[Jn].throwIfCalled()}},{key:"duration",value:function(){this[Jn].throwIfCalled()}},{key:"paused",value:function(){this[Jn].throwIfCalled()}},{key:"currentTime",value:function(){this[Jn].throwIfCalled()}},{key:"onFinish",value:function(e){if("function"!=typeof e)throw new TypeError("Expected a callback function");this[Jn].onFinishCallbacks.push($e(e,this.logger))}},{key:"onError",value:function(e){if("function"!=typeof e)throw new TypeError("Expected a callback function");this[Jn].onErrorCallbacks.push($e(e,this.logger))}},{key:"isFinished",value:function(){return this[Jn].finished}},{key:"isStarted",value:function(){return this[Jn].started}},{key:"resize",value:function(){var e=D(v.mark(function e(t,n,r){return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this[Jn].size={height:n,viewmode:r,width:t},!this.isStarted()||this.isFinished()||!this.icons){e.next=6;break}return e.next=4,this[Jn].removeIcons();case 4:return e.next=6,this[Jn].drawIcons();case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(),er=m.complete,tr=m.error,nr=m.skip,rr=Symbol("_private"),ir=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};z(this,t);var i=X(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i[rr]={handleMetric:function(e,t){switch(e){case er:i[Jn].finish();break;case tr:i.error=t,i.errorCode=i.error&&i.error.code?i.error.code:405,i[Jn].onErrorCallbacks.forEach(function(e){return e(i.error,{adUnit:i,vastChain:i.vastChain})}),i[Jn].finish();break;case nr:i.cancel()}i.emit(e,{adUnit:i,type:e})}},i.assetUri=null,i.type="VAST";var o=i[Jn].onFinishCallbacks,a=i[rr].handleMetric;i.hooks=r.hooks||{};var u=It({hooks:i.hooks,vastChain:i.vastChain,videoAdContainer:i.videoAdContainer},a);return o.push(u),i}return G(t,Zn),W(t,[{key:"start",value:function(){var e=D(v.mark(function e(){var t,n,r,i,o,a,u,c=this;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this[Jn].throwIfFinished(),!this.isStarted()){e.next=3;break}throw new Error("VastAdUnit already started");case 3:if(t=this.vastChain[0].ad,n=this.videoAdContainer,r=n.videoElement,i=n.element,o=Qe(t,r,i),!Boolean(o)){e.next=16;break}if(!this.icons){e.next=11;break}return a=function(){var e=D(v.mark(function e(){return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.isFinished()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c[Jn].drawIcons();case 4:c[Jn].hasPendingIconRedraws()&&!c.isFinished()&&Ge(r,"timeupdate",a);case 5:case"end":return e.stop()}},e,c)}));return function(){return e.apply(this,arguments)}}(),e.next=11,a();case 11:r.src=o.src,this.assetUri=o.src,r.play(),e.next=19;break;case 16:(u=new Error("Can't find a suitable media to play")).code=403,this[rr].handleMetric(tr,u);case 19:this[Jn].started=!0;case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){this.videoAdContainer.videoElement.play()}},{key:"pause",value:function(){this.videoAdContainer.videoElement.pause()}},{key:"paused",value:function(){return this.videoAdContainer.videoElement.paused}},{key:"setVolume",value:function(e){this.videoAdContainer.videoElement.volume=e}},{key:"getVolume",value:function(){return this.videoAdContainer.videoElement.volume}},{key:"cancel",value:function(){this[Jn].throwIfFinished(),this.videoAdContainer.videoElement.pause(),this[Jn].finish()}},{key:"duration",value:function(){return this.isStarted()?this.videoAdContainer.videoElement.duration:0}},{key:"currentTime",value:function(){return this.isStarted()?this.videoAdContainer.videoElement.currentTime:0}},{key:"resize",value:function(){var e=D(v.mark(function e(n,r,i){var o,a,u,c,s;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this,n,r,i);case 2:this.isStarted()&&!this.isFinished()&&(o=this.vastChain[0].ad,a=this.videoAdContainer,u=a.videoElement,c=a.element,s=Qe(o,u,c),Boolean(s)&&u.src!==s.src&&Pt(u,s));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(),or=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],ar=function(e){var t=e.type;return or.some(function(e){return e===t})},ur=function(){var e=D(v.mark(function e(t,n){var r,i,o,a;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(we(t[0].ad)||[]).filter(ar)[0]){e.next=3;break}throw new TypeError("VastChain does not contain a supported vpaid creative");case 3:return i=r.src,o=r.type,e.next=6,n.addScript(i,{type:o});case 6:return a=n.executionContext,e.abrupt("return",a.getVPAIDAd());case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),cr="AdStarted",sr="AdStopped",lr="AdSkipped",dr="AdDurationChange",fr="AdRemainingTimeChange",hr="AdVolumeChange",pr="AdImpression",vr="AdVideoStart",mr="AdVideoFirstQuartile",yr="AdVideoMidpoint",wr="AdVideoThirdQuartile",gr="AdVideoComplete",br="AdClickThru",Er="AdUserAcceptInvitation",xr="AdUserMinimize",kr="AdUserClose",Ar="AdPaused",Cr="AdPlaying",Tr="AdError",Lr=function(e,t,n){return new Promise(function(r,i){var o=void 0,a=function i(){"number"==typeof n&&clearTimeout(o),e.unsubscribe(i,t),r()};"number"==typeof n&&(o=setTimeout(function(){e.unsubscribe(a,t),i(new Error("Timeout waiting for event '"+t+"'"))},n)),e.subscribe(a,t)})},Ir=function(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=Lr(e,n,5e3);return e[t].apply(e,i),a},Pr=function(e){var t=e.split(".");return parseInt(t[0],10)},Sr=function(e,t){var n=e.handshakeVersion(t);if(!function(e,t){var n=Pr(t);return!(n<1)&&n<=Pr(e)}(t,n))throw new Error("Creative Version '"+n+"' not supported");return n},Or=function(e,t,n){var r=document.createElement("DIV");return Object.assign(r.style,{border:"0px",cursor:"pointer",height:n+"px",left:"0px",margin:"0px",padding:"0px",position:"absolute",top:"0px",width:t+"px"}),e.appendChild(r),r},_r=m.complete,Ur=m.mute,Fr=m.unmute,jr=m.skip,Vr=m.start,Rr=m.firstQuartile,Br=m.pause,Nr=m.resume,Mr=m.impression,Dr=m.midpoint,zr=m.thirdQuartile,Wr=m.clickThrough,Hr=m.error,qr=m.closeLinear,Qr=m.creativeView,Gr=["AdLoaded",cr,sr,lr,"AdSkippableStateChange","AdSizeChange","AdLinearChange",dr,"AdExpandedChange",fr,hr,pr,vr,mr,yr,wr,gr,br,"AdInteraction",Er,xr,kr,Ar,Cr,"AdLog",Tr].filter(function(e){return"AdLoaded"!==e}),Xr=Symbol("_private"),$r=function(e){var t=e instanceof Error?e:new Error("VPAID general error");return t.code||(t.code=901),t},Kr=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};z(this,t);var o=X(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return o[Xr]={evtHandler:(r={},H(r,br,function(e,t,n){if(n)if(o.paused())o.resume();else{var r="string"==typeof e&&e.length>0?e:be(o.vastChain[0].ad);o.pause(),window.open(r,"_blank")}o.emit(Wr,{adUnit:o,type:Wr})}),H(r,dr,function(){o.emit(ct,{adUnit:o,type:ct})}),H(r,Tr,function(e){o.error=$r(e),o.errorCode=o.error.code,o[Jn].onErrorCallbacks.forEach(function(e){return e(o.error,{adUnit:o,vastChain:o.vastChain})}),o[Jn].finish(),o.emit(Hr,{adUnit:o,type:Hr})}),H(r,pr,function(){o[Xr].videoStart||o[Xr].handleVpaidEvt(vr),o.emit(Mr,{adUnit:o,type:Mr})}),H(r,Ar,function(){o[Xr].paused=!0,o.emit(Br,{adUnit:o,type:Br})}),H(r,Cr,function(){o[Xr].paused=!1,o.emit(Nr,{adUnit:o,type:Nr})}),H(r,fr,function(){o.emit(ct,{adUnit:o,type:ct})}),H(r,lr,function(){o.cancel(),o.emit(jr,{adUnit:o,type:jr})}),H(r,cr,function(){o.emit(Qr,{adUnit:o,type:Qr})}),H(r,sr,function(){o.emit(sr,{adUnit:o,type:sr}),o[Jn].finish()}),H(r,Er,function(){o.emit(y,{adUnit:o,type:y})}),H(r,kr,function(){o.emit(qr,{adUnit:o,type:qr}),o[Jn].finish()}),H(r,xr,function(){o.emit(w,{adUnit:o,type:w})}),H(r,gr,function(){o.emit(_r,{adUnit:o,type:_r}),o[Jn].finish()}),H(r,mr,function(){o.emit(Rr,{adUnit:o,type:Rr})}),H(r,yr,function(){o.emit(Dr,{adUnit:o,type:Dr})}),H(r,vr,function(){o[Xr].videoStart||(o[Xr].videoStart=!0,o[Xr].paused=!1,o.emit(Vr,{adUnit:o,type:Vr}))}),H(r,wr,function(){o.emit(zr,{adUnit:o,type:zr})}),H(r,hr,function(){var e=o.getVolume();o.emit(at,{adUnit:o,type:at}),0!==e||o[Xr].muted||(o[Xr].muted=!0,o.emit(Ur,{adUnit:o,type:Ur})),e>0&&o[Xr].muted&&(o[Xr].muted=!1,o.emit(Fr,{adUnit:o,type:Fr}))}),r),handleVpaidEvt:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=o[Xr].evtHandler[e];i&&i.apply(void 0,n),o.emit(e,{adUnit:o,type:e})},muted:!1,paused:!0},o.type="VPAID",o.creativeAd=null,o[Xr].loadCreativePromise=ur(e,n),o}return G(t,Zn),W(t,[{key:"start",value:function(){var e=D(v.mark(function e(){var t,n,r,i,o,a,u,c,s,l=this;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this[Jn].throwIfFinished(),!this.isStarted()){e.next=3;break}throw new Error("VpaidAdUnit already started");case 3:return e.prev=3,e.next=6,this[Xr].loadCreativePromise;case 6:for(this.creativeAd=e.sent,t=Lr(this.creativeAd,"AdLoaded"),n=!0,r=!1,i=void 0,e.prev=11,o=Gr[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)u=a.value,this.creativeAd.subscribe(this[Xr].handleVpaidEvt.bind(this,u),u);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),r=!0,i=e.t0;case 19:e.prev=19,e.prev=20,!n&&o.return&&o.return();case 22:if(e.prev=22,!r){e.next=25;break}throw i;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return this.creativeAd.getAdIcons&&!this.creativeAd.getAdIcons()&&(this.icons=null),Sr(this.creativeAd,"2.0"),d=this.creativeAd,f=this.videoAdContainer,h=this.vastChain,p=void 0,m=void 0,y=void 0,w=void 0,g=void 0,b=void 0,E=void 0,p=f.element,m=p.getBoundingClientRect(),y=m.width,w=m.height,g=Qn(y,w),b={slot:Or(p,y,w),videoSlot:f.videoElement,videoSlotCanAutoPlay:f.isOriginalVideoElement},E=Ae(h[0].XML),d.initAd(y,w,g,-1,E,b),e.next=32,t;case 32:if(this.videoAdContainer.isDestroyed()){e.next=48;break}return e.prev=33,(c=this.videoAdContainer.videoElement).muted?(this[Xr].muted=!0,this.setVolume(0)):this.setVolume(c.volume),e.next=38,Ir(this.creativeAd,"startAd",cr);case 38:if(!this.icons){e.next=42;break}return s=function(){var e=D(v.mark(function e(){return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.isFinished()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l[Jn].drawIcons();case 4:l[Jn].hasPendingIconRedraws()&&!l.isFinished()&&setTimeout(s,500);case 5:case"end":return e.stop()}},e,l)}));return function(){return e.apply(this,arguments)}}(),e.next=42,s();case 42:this[Jn].started=!0,e.next=48;break;case 45:e.prev=45,e.t1=e.catch(33),this.cancel();case 48:return e.abrupt("return",this);case 51:throw e.prev=51,e.t2=e.catch(3),this[Xr].handleVpaidEvt(Tr,e.t2),e.t2;case 55:case"end":return e.stop()}var d,f,h,p,m,y,w,g,b,E},e,this,[[3,51],[11,15,19,27],[20,,22,26],[33,45]])}));return function(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){this.creativeAd.resumeAd()}},{key:"pause",value:function(){this.creativeAd.pauseAd()}},{key:"paused",value:function(){return this.isFinished()||this[Xr].paused}},{key:"setVolume",value:function(e){this.creativeAd.setAdVolume(e)}},{key:"getVolume",value:function(){return this.creativeAd.getAdVolume()}},{key:"cancel",value:function(){var e=D(v.mark(function e(){var t;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this[Jn].throwIfFinished(),e.prev=1,t=Lr(this.creativeAd,sr,3e3),this.creativeAd.stopAd(),e.next=6,t;case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this[Jn].finish();case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"duration",value:function(){if(!this.creativeAd)return 0;var e=this.creativeAd.getAdDuration();return e<0?0:e}},{key:"currentTime",value:function(){if(!this.creativeAd)return 0;var e=this.creativeAd.getAdRemainingTime();return e<0?0:this.duration()-e}},{key:"resize",value:function(){var e=D(v.mark(function e(n,r,i){return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this,n,r,i);case 2:return e.abrupt("return",Ir(this.creativeAd,"resizeAd","AdSizeChange",n,r,i));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(),Yr=function(e,t,n){var r=n.tracker,i="VPAID"===n.type?new Kr(e,t,n):new ir(e,t,n);return Object.values(m).forEach(function(t){return i.on(t,function(t){var n=t.type,o={data:t.data,errorCode:i.errorCode,tracker:r};!function(e,t,n){var r=n.data,i=n.errorCode,o=n.tracker,a=void 0===o?Te:o,u=n.logger,c=void 0===u?console:u,s=Oe[e];s?s(t,{data:q({},r,{errorCode:i}),errorCode:i,tracker:a}):c.error("Event '"+e+"' cannot be tracked")}(n,e,o)})}),Object.values(g).forEach(function(t){return i.on(t,function(t){var n={data:t.data,tracker:r};!function(e,t,n){var r=n.data,i=n.tracker,o=void 0===i?Te:i,a=n.logger,u=void 0===a?console:a,c=Ue[e];c?c(t,{data:q({},r),tracker:o}):u.error("Event '"+e+"' cannot be tracked")}(t.type,e,n)})}),i},Jr=function(e,t){if(!Array.isArray(e)||0===e.length)throw new TypeError("Invalid vastChain");if(!(t instanceof We))throw new TypeError("Invalid VideoAdContainer")},Zr=function(e,t){var n=me(e);return!!n&&n.some(function(e){return qe(t,e)})},ei=function(e,t){var n=t.onAdReady;return new Promise(function(t,r){var i=function(e){return function(){return r(new Error("Ad unit start rejected due to event '"+e+"'"))}};e.onError(r),e.on("start",function(){return t(e)}),e.on(kr,i(kr)),e.on("closeLinear",i("closeLinear")),e.on(sr,i(sr)),n(e),e.start()})},ti=function(e,t,n){if(r=e[0].ad,!Boolean(we(r)))throw new Error("No valid creative found in the passed VAST chain");var r,i=Yr(e,t,q({},n,{type:"VPAID"}));return ei(i,n)},ni=function(e,t,n){var r=Yr(e,t,q({},n,{type:"VAST"}));return ei(r,n)},ri=function(){var e=D(v.mark(function e(t,n,r){return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Jr(t,n),e.prev=1,e.next=4,ti(t,n,r);case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!Zr(t[0].ad,n.videoElement)){e.next=11;break}return e.abrupt("return",ni(t,n,r));case 11:throw e.t0;case 12:case"end":return e.stop()}},e,void 0,[[1,7]])}));return function(t,n,r){return e.apply(this,arguments)}}(),ii=function(){var e=D(v.mark(function e(t,n,r){var i,o,a,u,c,s,l;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0,e.prev=1,o=r.timeout,i=He(n,r.videoElement),a=ri(t,i,r),"number"==typeof o&&(u=!1,c=void 0,s=new Promise(function(e,n){c=setTimeout(function(){var e=r.tracker;Le(t,{errorCode:402,tracker:e}),u=!0,n(new Error("Timeout while starting the ad"))},r.timeout)}),a=Promise.race([a.then(function(e){return u?e.isStarted()&&e.cancel():clearTimeout(c),e}),s])),e.next=8,a;case 8:return(l=e.sent).onFinish(function(){i.destroy()}),e.abrupt("return",l);case 13:throw e.prev=13,e.t0=e.catch(1),i&&i.destroy(),e.t0;case 17:case"end":return e.stop()}},e,void 0,[[1,13]])}));return function(t,n,r){return e.apply(this,arguments)}}(),oi=function(){var e=D(v.mark(function e(t){var n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={credentials:"include"},r=Object.assign({},n,a),e.next=4,window.fetch(t,r);case 4:if(!((i=e.sent).status>=400)){e.next=9;break}throw(o=new Error(i.statusText)).response=i,o;case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ai=Symbol("requested"),ui=function(e){e[ai]=!0},ci=function(e,t){var n=t.wrapperLimit,r=void 0===n?5:n;if(e.length>r){var i=new Error("Wrapper Limit reached");throw i.code=304,i}},si=function(){var e=D(v.mark(function e(t,n){var r,i;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oi(t,n);case 3:return r=e.sent,e.next=6,r.text();case 6:return i=e.sent,e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0.code=502,e.t0;case 14:case"end":return e.stop()}},e,void 0,[[0,10]])}));return function(t,n){return e.apply(this,arguments)}}(),li=function(e){try{return j(e)}catch(e){throw e.code=100,e}},di=function(e){try{var t=ae(e);if(Boolean(t))return ui(t),t;throw new Error("No Ad")}catch(e){throw e.code=303,e}},fi=function(e,t){var n=e.ad,r=e.parsedXML,i=t.allowMultipleAds,o=void 0===i||i,a=t.followAdditionalWrappers,u=void 0===a||a;if(!ue(n)&&!ce(n)){var c=new Error("Invalid VAST, ad contains neither Wrapper nor Inline");throw c.code=101,c}if(oe(r)&&!o){var s=new Error("Multiple ads are not allowed");throw s.code=203,s}if(ue(n)&&!u){var l=new Error("To follow additional wrappers is not allowed");throw l.code=200,l}},hi=function(e,t){var n=e[0],r=Boolean(n)&&ue(n.ad)?le(n.ad):{};return q({},r,t)},pi=(kn=D(v.mark(function e(t,n){var r,i,o,a,u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={ad:null,errorCode:null,parsedXML:null,requestTag:t,XML:null},i=void 0,o=void 0,a=void 0,e.prev=4,i=hi(c,n),ci(c,i),u=si(t,i),"number"==typeof i.timeout&&(a=i.timeout,o=Date.now(),u=Promise.race([u,new Promise(function(e,t){setTimeout(function(){var e=new Error("RequestAd timeout");e.code=301,t(e)},a)})])),e.next=11,u;case 11:if(r.XML=e.sent,r.parsedXML=li(r.XML),r.ad=di(r.parsedXML),fi(r,i),!ue(r.ad)){e.next=18;break}return o&&(a-=Date.now()-o),e.abrupt("return",pi(se(r.ad),q({},i,{timeout:a}),[r].concat($(c))));case 18:return e.abrupt("return",[r].concat($(c)));case 21:return e.prev=21,e.t0=e.catch(4),Number.isInteger(e.t0.code)||(e.t0.code=900),r.errorCode=e.t0.code,r.error=e.t0,e.abrupt("return",[r].concat($(c)));case 27:case"end":return e.stop()}},e,void 0,[[4,21]])})),function(e,t){return kn.apply(this,arguments)}),vi=function(e,t){var n=e.ad,r=e.parsedXML,i=t.fallbackOnNoAd,o=void 0===i||i,a=t.useAdBuffet,u=void 0!==a&&a,c=te(r).filter(function(e){return!Boolean(e[ai])}),s=null;return oe(r)?(u&&(s=c.filter(function(e){return!ie(e)})[0]),s||(s=function(e,t){var n=re(e)+1;return t.find(function(e){return re(e)===n})||null}(n,c))):c.length>0&&o&&(s=c[0]),s},mi=function e(t,n){!function(e){if(!Array.isArray(e))throw new TypeError("Invalid VAST chain");if(0===e.length)throw new Error("No next ad to request")}(t);var r=t[0],i=vi(r,n);if(Boolean(i)){var o=[Object.assign({},r,{ad:i})].concat($(t.slice(1)));return ui(i),ue(i)?pi(se(i),n,o):Promise.resolve(o)}return e(t.slice(1),n)},yi=function(e,t){if(!e||0===e.length)throw new Error("Invalid VastChain");var n=e[0];if(!t.vpaidEnabled&&function(e){return Boolean(we(e[0].ad))}(e)){var r=new Error("VPAID ads are not supported by the current player");r.code=200,n.errorCode=200,n.error=r}if(Boolean(n.error))throw n.error;t.hooks&&"function"==typeof t.hooks.validateVastResponse&&t.hooks.validateVastResponse(e)},wi=function(e){return function(){"function"==typeof e&&e.apply(void 0,arguments)}},gi=function(e,t){return e&&e[0]&&e[0].errorCode||t.code},bi=function(e,t){var n=t.hooks;return n&&"function"==typeof n.transformVastResponse?n.transformVastResponse(e):e},Ei=function(){var e=D(v.mark(function e(t,n,r,i){var o,a,u,c,s,l,d,f,h,p;return v.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0,a=void 0,u=void 0,c=q({},r),s=c.onAdStart,l=c.onError,d=c.onRunFinish,e.prev=5,"number"==typeof c.timeout&&(a=Date.now()),e.next=9,t();case 9:if(o=e.sent,!i()){e.next=13;break}return d(),e.abrupt("return");case 13:return a&&(f=Date.now(),c.timeout-=f-a,a=f),yi(o,c),e.next=17,ii(bi(o,c),n,q({},c));case 17:if(u=e.sent,!i()){e.next=22;break}return u.cancel(),d(),e.abrupt("return");case 22:u.onError(l),u.onFinish(d),s(u),e.next=38;break;case 27:if(e.prev=27,e.t0=e.catch(5),h=gi(o,e.t0),Boolean(h)&&(p=r.tracker,Le(o,{errorCode:h,tracker:p})),l(e.t0,{adUnit:u,vastChain:o}),!o||i()){e.next=37;break}if(a&&(c.timeout-=Date.now()-a),a&&!(c.timeout>0)){e.next=37;break}return Ei(function(){return mi(o,c)},n,q({},c),i),e.abrupt("return");case 37:d();case 38:case"end":return e.stop()}},e,void 0,[[5,27]])}));return function(t,n,r,i){return e.apply(this,arguments)}}(),xi=function(e,t,n){var r=!1,i=null,o=wi(n.onAdStart),a=q({vpaidEnabled:!0},n,{onAdReady:wi(n.onAdReady),onAdStart:function(e){o(i=e)},onError:wi(n.onError),onRunFinish:wi(n.onRunFinish)});return n.videoElement&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&n.videoElement.load(),Ei(function(){return pi(e,a)},t,a,function(){return r}),function(){r=!0,i&&!i.isFinished()&&i.cancel()}}}).call(this,n(2))},function(e,t,n){"use strict";n.r(t);var r=n(0);n(3);document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#adTag"),t=document.querySelector(".vast-test-btn"),n=document.querySelector(".vast-media video"),i=document.querySelector(".video-ad-container"),o=void 0,a=function(e){o=e,console.log("### onAdReady",o);var t=function(e){return console.log("### "+e.type,e.adUnit)};["pause","resume","finish","impression","start","skip","firstQuartile","midpoint","thirdQuartile","complete"].forEach(function(e){o.on(e,t)})},u=function(){var t=e.value,o=n.src,u=function e(){n.play(),n.removeEventListener("contentloadedmetadata",e),n.removeEventListener("canplay",e)};i.classList.add("active"),n.pause(),n.currentTime=0,console.log("### adTag",t),Object(r.a)(t,i,{onAdReady:a,onError:function(e){console.log("### onError",e)},onRunFinish:function(e){console.log("### onRunFinish",e),i.classList.remove("active"),n.src===o?n.play():(n.addEventListener("contentloadedmetadata",u),n.addEventListener("canplay",u),n.src=o,n.load())},timeout:15e3,videoElement:n})};e.addEventListener("change",function(){e.value?(t.classList.add("active"),t.addEventListener("click",u)):(t.classList.remove("active"),t.removeEventListener("click",u))})})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){}])});
//# sourceMappingURL=demo.js.map